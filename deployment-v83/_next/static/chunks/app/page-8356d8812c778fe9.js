(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1133:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1795:(e,t,a)=>{Promise.resolve().then(a.bind(a,4929))},4581:(e,t,a)=>{"use strict";a.d(t,{i:()=>i});var r=a(2115),l=a(5731);function s(e){var t;return{id:String(e.id),name:e.name,startDate:new Date(e.start_date),endDate:new Date(e.end_date),progress:e.progress,status:e.status,isMilestone:e.is_milestone,order:e.task_order,dependencies:null==(t=e.dependencies)?void 0:t.map(String),parentId:e.parent_id?String(e.parent_id):void 0,notes:e.notes||void 0,color:e.color||void 0}}function n(e,t){var a;return{project_id:t,name:e.name,description:"",notes:e.notes||"",start_date:e.startDate instanceof Date?e.startDate.toISOString().split("T")[0]:new Date(e.startDate).toISOString().split("T")[0],end_date:e.endDate instanceof Date?e.endDate.toISOString().split("T")[0]:new Date(e.endDate).toISOString().split("T")[0],progress:e.progress,status:e.status,is_milestone:e.isMilestone||!1,task_order:e.order,dependencies:null==(a=e.dependencies)?void 0:a.map(Number).filter(e=>!isNaN(e)),parent_id:e.parentId?Number(e.parentId):null,color:e.color||null}}function i(e){let[t,a]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),m=(0,r.useCallback)(async()=>{if(!e){a([]),d(!1);return}d(!0),c(null);let t=await l.bI.getByProject(e);if(t.success&&t.data){let e=t.data.map(s);e.sort((e,t)=>{let a=new Date(e.startDate).getTime()-new Date(t.startDate).getTime();return 0!==a?a:new Date(e.endDate).getTime()-new Date(t.endDate).getTime()}),a(e)}else c(t.error||"Failed to fetch tasks"),a([]);d(!1)},[e]);(0,r.useEffect)(()=>{m()},[m]);let u=e=>[...e].sort((e,t)=>{let a=new Date(e.startDate).getTime()-new Date(t.startDate).getTime();return 0!==a?a:new Date(e.endDate).getTime()-new Date(t.endDate).getTime()}),h=(0,r.useCallback)(async t=>{if(!e)return null;let r=n(t,e),i=await l.bI.create(r);if(i.success&&i.data){let e=s(i.data);return a(t=>u([...t,e])),e}return c(i.error||"Failed to create task"),null},[e]),p=(0,r.useCallback)(async t=>{if(!e)return null;let r=Number(t.id);if(isNaN(r))return c("Invalid task ID"),null;let i=n(t,e),d=await l.bI.update(r,i);if(d.success&&d.data){let e=s(d.data);return a(a=>u(a.map(a=>a.id===t.id?e:a))),e}return c(d.error||"Failed to update task"),null},[e]);return{tasks:t,loading:i,error:o,refetch:m,createTask:h,updateTask:p,deleteTask:(0,r.useCallback)(async e=>{let t=Number(e);if(isNaN(t))return c("Invalid task ID"),!1;let r=await l.bI.delete(t);return r.success?(a(t=>t.filter(t=>t.id!==e)),!0):(c(r.error||"Failed to delete task"),!1)},[]),reorderTasks:(0,r.useCallback)(async t=>{if(!e)return;let r=u(t).map((e,t)=>({...e,order:t+1}));a(r);let s=r.map(e=>({id:Number(e.id),order:e.order})).filter(e=>!isNaN(e.id));await l.bI.reorder(e,s)},[e])}}},4929:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var r=a(2372),l=a(4399),s=a(6874),n=a.n(s),i=a(4541),d=a(4581),o=a(6695),c=a(285),m=a(6126),u=a(2115),h=a(5155);a(7650);var p=a(9708),x=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,p.TL)(`Primitive.${t}`),r=u.forwardRef((e,r)=>{let{asChild:l,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,h.jsx)(l?a:t,{...s,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),f="Progress",[g,b]=function(e,t=[]){let a=[],r=()=>{let t=a.map(e=>u.createContext(e));return function(a){let r=a?.[e]||t;return u.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return r.scopeName=e,[function(t,r){let l=u.createContext(r);l.displayName=t+"Context";let s=a.length;a=[...a,r];let n=t=>{let{scope:a,children:r,...n}=t,i=a?.[e]?.[s]||l,d=u.useMemo(()=>n,Object.values(n));return(0,h.jsx)(i.Provider,{value:d,children:r})};return n.displayName=t+"Provider",[n,function(a,n){let i=n?.[e]?.[s]||l,d=u.useContext(i);if(d)return d;if(void 0!==r)return r;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:a,scopeName:r})=>{let l=a(e)[`__scope${r}`];return{...t,...l}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}(r,...t)]}(f),[N,v]=g(f),k=u.forwardRef((e,t)=>{var a,r,l,s;let{__scopeProgress:n,value:i=null,max:d,getValueLabel:o=y,...c}=e;(d||0===d)&&!T(d)&&console.error((a="".concat(d),r="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let m=T(d)?d:100;null===i||A(i,m)||console.error((l="".concat(i),s="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(s,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let u=A(i,m)?i:null,p=F(u)?o(u,m):void 0;return(0,h.jsx)(N,{scope:n,value:u,max:m,children:(0,h.jsx)(x.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":F(u)?u:void 0,"aria-valuetext":p,role:"progressbar","data-state":Y(u,m),"data-value":null!=u?u:void 0,"data-max":m,...c,ref:t})})});k.displayName=f;var w="ProgressIndicator",D=u.forwardRef((e,t)=>{var a;let{__scopeProgress:r,...l}=e,s=v(w,r);return(0,h.jsx)(x.div,{"data-state":Y(s.value,s.max),"data-value":null!=(a=s.value)?a:void 0,"data-max":s.max,...l,ref:t})});function y(e,t){return"".concat(Math.round(e/t*100),"%")}function Y(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function F(e){return"number"==typeof e}function T(e){return F(e)&&!isNaN(e)&&e>0}function A(e,t){return F(e)&&!isNaN(e)&&e<=t&&e>=0}D.displayName=w;var _=a(9434);let j=u.forwardRef((e,t)=>{let{className:a,value:l,...s}=e;return(0,r.Y)(k,{ref:t,className:(0,_.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...s,children:(0,r.Y)(D,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});j.displayName=k.displayName;var I=a(9827),S=a(5300),C=a(286),P=a(2023),M=a(157);let Z=(0,M.A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),$=(0,M.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),O=(0,M.A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var W=a(7648);let R=(0,M.A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),z=(0,M.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var E=a(1133);let L=(0,M.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),B=[{title:"Project Timeline",description:"View and manage your Gantt chart",icon:I.A,href:"/timeline",color:"from-teal-500 to-teal-600"},{title:"Document Library",description:"Access deal documents and files",icon:S.A,href:"/documents",color:"from-blue-500 to-blue-600"},{title:"Deal Team",description:"Contact team members",icon:C.A,href:"/team",color:"from-purple-500 to-purple-600"},{title:"Diary",description:"Schedule and manage events",icon:P.A,href:"/diary",color:"from-amber-500 to-amber-600"}];function G(){let{user:e,currentProject:t,projects:a}=(0,i.A)(),l=t?Number(t.id):null,{tasks:s,loading:u}=(0,d.i)(l),h=s.length,p=s.filter(e=>"complete"===e.status).length,x=s.filter(e=>"in-progress"===e.status).length;s.filter(e=>"not-started"===e.status).length;let f=s.filter(e=>new Date(e.endDate)<new Date&&"complete"!==e.status).length,g=s.filter(e=>e.isMilestone).length,b=s.filter(e=>e.isMilestone&&"complete"===e.status).length,N=h>0?Math.round(p/h*100):0,v=s.filter(e=>e.isMilestone&&"complete"!==e.status).sort((e,t)=>new Date(e.endDate).getTime()-new Date(t.endDate).getTime()).slice(0,3),k=s.filter(e=>"in-progress"===e.status).sort((e,t)=>new Date(e.endDate).getTime()-new Date(t.endDate).getTime()).slice(0,5);return(0,r.FD)("div",{className:"space-y-8",children:[(0,r.FD)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,r.FD)("div",{children:[(0,r.FD)("h1",{className:"text-2xl md:text-3xl font-bold text-stone-800 dark:text-white",children:[(()=>{let e=new Date().getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})(),", ",(null==e?void 0:e.name.split(" ")[0])||"Guest"]}),(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400 mt-1",children:"Welcome to your client portal. Here's an overview of your projects."})]}),t&&(0,r.FD)("div",{className:"flex items-center gap-3 px-4 py-2 bg-teal-50 dark:bg-teal-900/20 rounded-lg border border-teal-200 dark:border-teal-800",children:[(0,r.Y)(Z,{className:"h-5 w-5 text-teal-600 dark:text-teal-400"}),(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-xs text-teal-600 dark:text-teal-400 font-medium",children:"Current Project"}),(0,r.Y)("p",{className:"text-sm font-semibold text-stone-800 dark:text-white",children:t.name})]})]})]}),(0,r.FD)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.FD)(o.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-teal-500 to-teal-600"}),(0,r.Y)(o.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"Total Tasks"}),(0,r.Y)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:h})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-teal-100 dark:bg-teal-900/30",children:(0,r.Y)($,{className:"h-6 w-6 text-teal-600 dark:text-teal-400"})})]})})]}),(0,r.FD)(o.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-green-600"}),(0,r.Y)(o.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"Completed"}),(0,r.Y)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:p})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-green-100 dark:bg-green-900/30",children:(0,r.Y)(O,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})})]}),(0,r.FD)(o.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 to-amber-600"}),(0,r.Y)(o.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"In Progress"}),(0,r.Y)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:x})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-amber-100 dark:bg-amber-900/30",children:(0,r.Y)(W.A,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})})]})})]}),(0,r.FD)(o.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-purple-600"}),(0,r.Y)(o.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"Milestones"}),(0,r.FD)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:[b,"/",g]})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-purple-100 dark:bg-purple-900/30",children:(0,r.Y)(R,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})]})})]})]}),(0,r.FD)(o.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700",children:[(0,r.FD)(o.aR,{children:[(0,r.FD)(o.ZB,{className:"flex items-center gap-2 text-stone-800 dark:text-white",children:[(0,r.Y)(z,{className:"h-5 w-5 text-teal-600"}),"Project Progress"]}),(0,r.Y)(o.BT,{className:"text-stone-500 dark:text-stone-400",children:"Overall completion status of current project"})]}),(0,r.Y)(o.Wu,{children:(0,r.FD)("div",{className:"space-y-4",children:[(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("span",{className:"text-sm font-medium text-stone-600 dark:text-stone-300",children:[p," of ",h," tasks completed"]}),(0,r.FD)("span",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:[N,"%"]})]}),(0,r.Y)(j,{value:N,className:"h-3"}),f>0&&(0,r.FD)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[(0,r.Y)(E.A,{className:"h-4 w-4"}),(0,r.FD)("span",{className:"text-sm",children:[f," task",f>1?"s":""," overdue"]})]})]})})]}),(0,r.FD)("div",{children:[(0,r.Y)("h2",{className:"text-lg font-semibold text-stone-800 dark:text-white mb-4",children:"Quick Actions"}),(0,r.Y)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:B.map(e=>{let t=e.icon;return(0,r.Y)(n(),{href:e.href,children:(0,r.Y)(o.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 hover:shadow-lg transition-all duration-200 cursor-pointer group h-full",children:(0,r.FD)(o.Wu,{className:"pt-6",children:[(0,r.Y)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"),children:(0,r.Y)(t,{className:"h-6 w-6 text-white"})}),(0,r.Y)("h3",{className:"font-semibold text-stone-800 dark:text-white mb-1 group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors",children:e.title}),(0,r.Y)("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:e.description}),(0,r.Y)(L,{className:"h-4 w-4 text-teal-600 dark:text-teal-400 mt-3 group-hover:translate-x-1 transition-transform"})]})})},e.href)})})]}),(0,r.FD)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.FD)(o.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700",children:[(0,r.Y)(o.aR,{children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)(o.ZB,{className:"flex items-center gap-2 text-stone-800 dark:text-white",children:[(0,r.Y)(R,{className:"h-5 w-5 text-amber-500"}),"Upcoming Milestones"]}),(0,r.Y)(n(),{href:"/timeline",children:(0,r.FD)(c.$,{variant:"ghost",size:"sm",className:"text-teal-600 dark:text-teal-400",children:["View All ",(0,r.Y)(L,{className:"h-4 w-4 ml-1"})]})})]})}),(0,r.Y)(o.Wu,{children:0===v.length?(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400 text-center py-8",children:"No upcoming milestones"}):(0,r.Y)("div",{className:"space-y-4",children:v.map(e=>(0,r.FD)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-stone-50 dark:bg-stone-700/50",children:[(0,r.Y)("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:(0,r.Y)(R,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.Y)("p",{className:"font-medium text-stone-800 dark:text-white truncate",children:e.name}),(0,r.FD)("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["Due: ",new Date(e.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),(0,r.FD)(m.E,{variant:"in-progress"===e.status?"default":"secondary",className:"in-progress"===e.status?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"",children:[e.progress,"%"]})]},e.id))})})]}),(0,r.FD)(o.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700",children:[(0,r.Y)(o.aR,{children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)(o.ZB,{className:"flex items-center gap-2 text-stone-800 dark:text-white",children:[(0,r.Y)(W.A,{className:"h-5 w-5 text-teal-600"}),"In Progress Tasks"]}),(0,r.Y)(n(),{href:"/timeline",children:(0,r.FD)(c.$,{variant:"ghost",size:"sm",className:"text-teal-600 dark:text-teal-400",children:["View All ",(0,r.Y)(L,{className:"h-4 w-4 ml-1"})]})})]})}),(0,r.Y)(o.Wu,{children:0===k.length?(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400 text-center py-8",children:"No tasks in progress"}):(0,r.Y)("div",{className:"space-y-3",children:k.map(e=>(0,r.Y)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-stone-50 dark:bg-stone-700/50",children:(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.Y)("p",{className:"font-medium text-stone-800 dark:text-white truncate",children:e.name}),(0,r.FD)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.Y)(j,{value:e.progress,className:"h-1.5 flex-1"}),(0,r.FD)("span",{className:"text-xs text-stone-500 dark:text-stone-400 w-10",children:[e.progress,"%"]})]})]})},e.id))})})]})]})]})}var H=a(6671),U=a(7280);function V(){let{resolvedTheme:e}=(0,U.D)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(H.l$,{position:"top-right",richColors:!0,theme:"dark"===e?"dark":"light"}),(0,r.Y)(l.t,{children:(0,r.Y)(G,{})})]})}},7648:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[372,229,924,190,441,684,358],()=>t(1795)),_N_E=e.O()}]);