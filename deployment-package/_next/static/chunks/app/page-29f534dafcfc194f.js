(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1795:(e,t,a)=>{Promise.resolve().then(a.bind(a,6453))},6453:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tw});var r=a(2372),s=a(2115),n=a(9708),l=a(2085),o=a(2596),d=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,d.QP)((0,o.$)(t))}let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:o=!1,...d}=e,m=o?n.DX:"button";return(0,r.Y)(m,{className:i(c({variant:s,size:l,className:a})),ref:t,...d})});m.displayName="Button";var h=a(6215),u=a(3158),p=a(518),g=a(154);let f=h.bL,x=h.l9;h.YJ,h.ZL,h.Pb,h.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:n,...l}=e;return(0,r.FD)(h.ZP,{ref:t,className:i("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...l,children:[n,(0,r.Y)(u.A,{className:"ml-auto"})]})}).displayName=h.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(h.G5,{ref:t,className:i("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...s})}).displayName=h.G5.displayName;let b=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.Y)(h.ZL,{children:(0,r.Y)(h.UC,{ref:t,sideOffset:s,className:i("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...n})})});b.displayName=h.UC.displayName;let N=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.Y)(h.q7,{ref:t,className:i("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",a),...n})});N.displayName=h.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:n,...l}=e;return(0,r.FD)(h.H_,{ref:t,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...l,children:[(0,r.Y)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.Y)(h.VF,{children:(0,r.Y)(p.A,{className:"h-4 w-4"})})}),s]})}).displayName=h.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.FD)(h.hN,{ref:t,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.Y)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.Y)(h.VF,{children:(0,r.Y)(g.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=h.hN.displayName;let k=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.Y)(h.JU,{ref:t,className:i("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...n})});k.displayName=h.JU.displayName;let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(h.wv,{ref:t,className:i("-mx-1 my-1 h-px bg-muted",a),...s})});v.displayName=h.wv.displayName;var w=a(6923),y=a(8718),Y=a(9311),D=a(7554),F=a(8027),C=a(5120),S=a(6936),A=a(8271),T=a(8046);function j(e){let{projectName:t,projectDescription:a,onAddTask:s,onExportPNG:n,onExportJSON:l,onImportJSON:o,onRefresh:d,theme:i,resolvedTheme:c,onThemeChange:h,onOpenSettings:u,settings:p}=e;return(0,r.FD)("div",{className:"flex items-center justify-between gap-4 px-4 md:px-6 py-3 bg-stone-50 dark:bg-stone-800 border-b border-stone-200 dark:border-stone-700",children:[(0,r.Y)("div",{className:"md:hidden",children:(0,r.Y)("h2",{className:"text-sm font-semibold text-stone-700 dark:text-white truncate max-w-[150px]",children:t})}),(0,r.FD)("div",{className:"flex items-center gap-2 flex-wrap ml-auto",children:[(0,r.FD)(m,{variant:"outline",size:"sm",onClick:o,className:"border-stone-300 dark:border-stone-600 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700",children:[(0,r.Y)(w.A,{className:"w-4 h-4 mr-1.5"}),(0,r.Y)("span",{className:"hidden sm:inline",children:"Import"})]}),(0,r.FD)(m,{variant:"outline",size:"sm",onClick:l,className:"border-stone-300 dark:border-stone-600 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700",children:[(0,r.Y)(y.A,{className:"w-4 h-4 mr-1.5"}),(0,r.Y)("span",{className:"hidden sm:inline",children:"Export"})]}),(0,r.FD)(m,{variant:"outline",size:"sm",onClick:n,className:"border-stone-300 dark:border-stone-600 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700",children:[(0,r.Y)(Y.A,{className:"w-4 h-4 mr-1.5"}),"PNG"]}),(0,r.Y)(m,{variant:"outline",size:"sm",onClick:d,className:"border-stone-300 dark:border-stone-600 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700",children:(0,r.Y)(D.A,{className:"w-4 h-4"})}),(0,r.FD)(f,{children:[(0,r.Y)(x,{asChild:!0,children:(0,r.FD)(m,{variant:"outline",size:"sm",className:"border-teal-500 dark:border-teal-500 text-teal-600 dark:text-teal-400 hover:bg-teal-50 dark:hover:bg-teal-900/30 gap-1.5",children:["dark"===i?(0,r.Y)(F.A,{className:"w-4 h-4"}):"system"===i?(0,r.Y)(C.A,{className:"w-4 h-4"}):(0,r.Y)(S.A,{className:"w-4 h-4"}),(0,r.Y)("span",{className:"hidden sm:inline text-xs",children:"Theme"})]})}),(0,r.FD)(b,{align:"end",className:"dark:bg-stone-800 dark:border-stone-700",children:[(0,r.FD)(N,{onClick:()=>h("light"),className:"dark:hover:bg-stone-700",children:[(0,r.Y)(S.A,{className:"w-4 h-4 mr-2"}),"Light"]}),(0,r.FD)(N,{onClick:()=>h("dark"),className:"dark:hover:bg-stone-700",children:[(0,r.Y)(F.A,{className:"w-4 h-4 mr-2"}),"Dark"]}),(0,r.FD)(N,{onClick:()=>h("system"),className:"dark:hover:bg-stone-700",children:[(0,r.Y)(C.A,{className:"w-4 h-4 mr-2"}),"System"]}),u&&(0,r.FD)(r.FK,{children:[(0,r.Y)(v,{className:"dark:bg-stone-700"}),(0,r.FD)(N,{onClick:u,className:"dark:hover:bg-stone-700",children:[(0,r.Y)(A.A,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]})]}),(0,r.FD)(m,{size:"sm",onClick:s,className:"bg-stone-800 dark:bg-teal-600 hover:bg-stone-900 dark:hover:bg-teal-700 text-white",children:[(0,r.Y)(T.A,{className:"w-4 h-4 mr-1.5"}),"Add Task"]})]})]})}let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)("div",{ref:t,className:i("rounded-xl border bg-card text-card-foreground shadow",a),...s})});R.displayName="Card",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)("div",{ref:t,className:i("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)("div",{ref:t,className:i("font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)("div",{ref:t,className:i("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)("div",{ref:t,className:i("p-6 pt-0",a),...s})}).displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)("div",{ref:t,className:i("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";var M=a(9272),_=a(8376),P=a(7648),z=a(4601),L=a(5263);function I(e){let{tasks:t}=e,a=t.length,s=t.filter(e=>"complete"===e.status).length,n=t.filter(e=>"in-progress"===e.status).length,l=t.filter(e=>e.isMilestone).length,o=t.length>0?Math.round(t.reduce((e,t)=>e+t.progress,0)/t.length):0,d=[{label:"Total Tasks",value:a,icon:M.A,color:"text-stone-600 dark:text-stone-300",bgColor:"bg-stone-50 dark:bg-stone-800 border-stone-200 dark:border-stone-700",iconBg:"bg-stone-100 dark:bg-stone-700"},{label:"Completed",value:s,icon:_.A,color:"text-teal-600 dark:text-teal-400",bgColor:"bg-teal-50 dark:bg-teal-900/30 border-teal-200 dark:border-teal-800",iconBg:"bg-teal-100 dark:bg-teal-800/50"},{label:"In Progress",value:n,icon:P.A,color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-50 dark:bg-orange-900/30 border-orange-200 dark:border-orange-800",iconBg:"bg-orange-100 dark:bg-orange-800/50"},{label:"Milestones",value:l,icon:z.A,color:"text-cyan-600 dark:text-cyan-400",bgColor:"bg-cyan-50 dark:bg-cyan-900/30 border-cyan-200 dark:border-cyan-800",iconBg:"bg-cyan-100 dark:bg-cyan-800/50"},{label:"Avg. Progress",value:"".concat(o,"%"),icon:L.A,color:"text-stone-600 dark:text-stone-300",bgColor:"bg-stone-50 dark:bg-stone-800 border-stone-200 dark:border-stone-700",iconBg:"bg-stone-100 dark:bg-stone-700"}];return(0,r.Y)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4",children:d.map(e=>(0,r.Y)(R,{className:"p-3 md:p-4 border ".concat(e.bgColor," rounded-xl shadow-sm"),children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-xs font-medium ".concat(e.color," opacity-80"),children:e.label}),(0,r.Y)("p",{className:"text-2xl md:text-3xl font-bold ".concat(e.color," mt-0.5"),children:e.value})]}),(0,r.Y)("div",{className:"p-2 rounded-lg ".concat(e.iconBg),children:(0,r.Y)(e.icon,{className:"w-5 h-5 ".concat(e.color)})})]})},e.label))})}let E=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.Y)("input",{type:s,className:i("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});E.displayName="Input";var O=a(3433),U=a(9556),B=a(7381);let K=O.bL;O.YJ;let V=O.WT,J=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.FD)(O.l9,{ref:t,className:i("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.Y)(O.In,{asChild:!0,children:(0,r.Y)(U.A,{className:"h-4 w-4 opacity-50"})})]})});J.displayName=O.l9.displayName;let Z=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(O.PP,{ref:t,className:i("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.Y)(B.A,{className:"h-4 w-4"})})});Z.displayName=O.PP.displayName;let G=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(O.wn,{ref:t,className:i("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.Y)(U.A,{className:"h-4 w-4"})})});G.displayName=O.wn.displayName;let q=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...l}=e;return(0,r.Y)(O.ZL,{children:(0,r.FD)(O.UC,{ref:t,className:i("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,r.Y)(Z,{}),(0,r.Y)(O.LM,{className:i("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.Y)(G,{})]})})});q.displayName=O.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(O.JU,{ref:t,className:i("px-2 py-1.5 text-sm font-semibold",a),...s})}).displayName=O.JU.displayName;let H=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.FD)(O.q7,{ref:t,className:i("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.Y)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.Y)(O.VF,{children:(0,r.Y)(p.A,{className:"h-4 w-4"})})}),(0,r.Y)(O.p4,{children:s})]})});H.displayName=O.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(O.wv,{ref:t,className:i("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=O.wv.displayName;var W=a(5074),Q=a(5318),X=a(7805);function $(e){let{zoom:t,onZoomChange:a,filter:s,onFilterChange:n,showDependencies:l,onShowDependenciesChange:o,showCriticalPath:d,onShowCriticalPathChange:i,searchQuery:c="",onSearchChange:h}=e;return(0,r.FD)("div",{className:"flex flex-wrap items-center gap-4 px-4 md:px-6 py-3 bg-white dark:bg-stone-800 border-y border-stone-200 dark:border-stone-700",children:[h&&(0,r.Y)("div",{className:"flex items-center gap-2",children:(0,r.FD)("div",{className:"relative",children:[(0,r.Y)(W.A,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-stone-400 dark:text-stone-500"}),(0,r.Y)(E,{type:"text",placeholder:"Search tasks...",value:c,onChange:e=>h(e.target.value),className:"h-8 w-40 md:w-48 pl-8 pr-8 text-xs bg-white dark:bg-stone-700 border-stone-200 dark:border-stone-600 dark:text-white dark:placeholder:text-stone-400 focus:ring-1 focus:ring-stone-300 dark:focus:ring-stone-500"}),c&&(0,r.Y)("button",{type:"button",onClick:()=>h(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300",children:(0,r.Y)(Q.A,{className:"w-3.5 h-3.5"})})]})}),(0,r.FD)("div",{className:"flex items-center gap-3",children:[(0,r.Y)("span",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:"Zoom:"}),(0,r.Y)("div",{className:"flex bg-white dark:bg-stone-700 rounded-md border border-stone-200 dark:border-stone-600 p-0.5",children:["day","week","month"].map(e=>(0,r.Y)("button",{type:"button",onClick:()=>a(e),className:"px-3 py-1.5 text-xs font-medium rounded transition-colors capitalize ".concat(t===e?"bg-stone-800 dark:bg-teal-600 text-white":"text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-600"),children:e},e))})]}),(0,r.FD)("div",{className:"flex items-center gap-3",children:[(0,r.Y)("span",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:"Filter:"}),(0,r.FD)(K,{value:s,onValueChange:e=>n(e),children:[(0,r.Y)(J,{className:"w-32 h-8 text-xs bg-white dark:bg-stone-700 border-stone-200 dark:border-stone-600 dark:text-white",children:(0,r.Y)(V,{})}),(0,r.FD)(q,{className:"dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(H,{value:"all",children:"All Tasks"}),(0,r.Y)(H,{value:"complete",children:"Complete"}),(0,r.Y)(H,{value:"in-progress",children:"In Progress"}),(0,r.Y)(H,{value:"not-started",children:"Not Started"})]})]})]}),(0,r.Y)("div",{className:"flex-1 hidden md:block"}),(0,r.FD)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.FD)(m,{variant:"outline",size:"sm",onClick:()=>o(!l),className:"h-8 text-xs border-stone-200 dark:border-stone-600 ".concat(l?"bg-stone-800 dark:bg-teal-600 text-white border-stone-800 dark:border-teal-600 hover:bg-stone-900 dark:hover:bg-teal-700":"bg-white dark:bg-stone-700 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-600"),children:[(0,r.Y)(X.A,{className:"w-3.5 h-3.5 mr-1.5"}),"Dependencies"]}),(0,r.FD)(m,{variant:"outline",size:"sm",onClick:()=>i(!d),className:"h-8 text-xs border-stone-200 dark:border-stone-600 ".concat(d?"bg-red-600 text-white border-red-600 hover:bg-red-700":"bg-white dark:bg-stone-700 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-600"),children:[(0,r.Y)(z.A,{className:"w-3.5 h-3.5 mr-1.5 ".concat(d?"text-white":"")}),"Critical Path"]})]})]})}function ee(e,t){return Math.round((t.getTime()-e.getTime())/864e5)}function et(e,t,a){return{left:ee(t,new Date(e.startDate))*a,width:Math.max((ee(new Date(e.startDate),new Date(e.endDate))+1)*a-4,8)}}var ea=a(295),er=a(1133),es=a(8082);let en=es.Kq,el=es.bL,eo=es.l9,ed=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.Y)(es.ZL,{children:(0,r.Y)(es.UC,{ref:t,sideOffset:s,className:i("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",a),...n})})});ed.displayName=es.UC.displayName;var ei=a(5143),ec=a(402),em=a(8266);function eh(e){let{task:t,index:a,isCritical:s,showCriticalPath:n,onTaskClick:l,hasSubtasks:o,isSubtask:d,isCollapsed:i,onToggleCollapse:c}=e,{attributes:m,listeners:h,setNodeRef:p,transform:g,transition:f,isDragging:x}=(0,ec.gl)({id:t.id}),b={transform:em.Ks.Transform.toString(g),transition:f};return(0,r.FD)("div",{ref:p,style:b,className:"h-10 px-4 flex items-center gap-2 border-b border-stone-100 dark:border-stone-700 hover:bg-stone-100 dark:hover:bg-stone-600 cursor-pointer transition-colors ".concat(a%2==0?"bg-stone-50 dark:bg-stone-800":"bg-white dark:bg-stone-900"," ").concat(s?"border-l-2 border-l-red-500":""," ").concat(x?"opacity-50 shadow-lg z-50":""," ").concat(d?"pl-10":""),onClick:()=>null==l?void 0:l(t),onKeyDown:e=>"Enter"===e.key&&(null==l?void 0:l(t)),role:"button",tabIndex:0,children:[(0,r.Y)("div",{...m,...h,className:"drag-handle p-1 -m-1 rounded hover:bg-stone-200 dark:hover:bg-stone-600",onClick:e=>e.stopPropagation(),children:(0,r.Y)(ea.A,{className:"w-3.5 h-3.5 text-stone-400 dark:text-stone-500 flex-shrink-0"})}),o&&(0,r.Y)("button",{type:"button",onClick:e=>{e.stopPropagation(),null==c||c()},className:"p-0.5 hover:bg-stone-200 dark:hover:bg-stone-600 rounded",children:i?(0,r.Y)(u.A,{className:"w-3.5 h-3.5 text-stone-500"}):(0,r.Y)(U.A,{className:"w-3.5 h-3.5 text-stone-500"})}),(0,r.Y)("span",{className:"text-sm truncate ".concat(s?"text-red-700 dark:text-red-400 font-medium":"text-stone-700 dark:text-stone-200"),children:t.name}),s&&(0,r.Y)(er.A,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0"})]})}function eu(e){let{tasks:t,allTasks:a,zoom:n,filter:l,showDependencies:o,showCriticalPath:d,onTaskClick:i,onReorderTasks:c,projectName:m="Project"}=e,h=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(null),[g,f]=(0,s.useState)(new Set),x=(0,ei.FR)((0,ei.MS)(ei.AN,{activationConstraint:{distance:8}}),(0,ei.MS)(ei.uN,{coordinateGetter:ec.JR})),b=(0,s.useMemo)(()=>{let e=t.filter(e=>!e.parentId),a=new Map;for(let e of t)if(e.parentId){let t=a.get(e.parentId)||[];t.push(e),a.set(e.parentId,t)}return{parentTasks:e,childTasksMap:a}},[t]),N=(0,s.useMemo)(()=>{let e=[],{parentTasks:t,childTasksMap:a}=b;for(let r of t)if(e.push(r),!g.has(r.id)){let t=a.get(r.id)||[];e.push(...t)}return e},[b,g]),k=(0,s.useMemo)(()=>"all"===l?N:N.filter(e=>e.status===l),[N,l]),v=(0,s.useMemo)(()=>d?new Set(function(e){if(0===e.length)return[];let t=new Map;for(let a of e)t.set(a.id,a);let a=e=>ee(new Date(e.startDate),new Date(e.endDate))+1,r=new Map,s=new Map;for(let t of e)r.set(t.id,[]),s.set(t.id,t.dependencies||[]);for(let t of e)if(t.dependencies)for(let e of t.dependencies){let a=r.get(e)||[];a.push(t.id),r.set(e,a)}let n=new Map,l=new Map,o=new Set,d=[],i=e=>{if(o.has(e))return;o.add(e);let a=t.get(e);if(null==a?void 0:a.dependencies)for(let e of a.dependencies)t.has(e)&&i(e);d.push(e)};for(let t of e)i(t.id);for(let e of d){let r=t.get(e);if(!r)continue;let o=a(r),d=s.get(e)||[],i=0;for(let e of d)i=Math.max(i,l.get(e)||0);n.set(e,i),l.set(e,i+o)}let c=new Map,m=new Map,h=0;for(let e of l.values())h=Math.max(h,e);for(let e=d.length-1;e>=0;e--){let s=d[e],n=t.get(s);if(!n)continue;let l=a(n),o=r.get(s)||[],i=h;for(let e of o){let t=c.get(e);void 0!==t&&(i=Math.min(i,t))}m.set(s,i),c.set(s,i-l)}let u=[];for(let t of e){let e=n.get(t.id)||0;0==(c.get(t.id)||0)-e&&u.push(t.id)}return u}(a||t)):new Set,[a,t,d]),{start:w,end:y}=(0,s.useMemo)(()=>(function(e){if(0===e.length){let e=new Date;return{start:new Date(e.getFullYear(),e.getMonth()-1,1),end:new Date(e.getFullYear(),e.getMonth()+2,0)}}let t=new Date(e[0].startDate),a=new Date(e[0].endDate);for(let r of e)new Date(r.startDate)<t&&(t=new Date(r.startDate)),new Date(r.endDate)>a&&(a=new Date(r.endDate));return{start:t=new Date(t.getFullYear(),t.getMonth(),1),end:a=new Date(a.getFullYear(),a.getMonth()+1,15)}})(a||t),[a,t]),Y=function(e){switch(e){case"day":return 40;case"week":default:return 20;case"month":return 8}}(n),D=ee(w,y),F=D*Y,C=(0,s.useMemo)(()=>ee(w,new Date)*Y+Y/2,[w,Y]),S=(0,s.useMemo)(()=>{let e=[],t=new Date(w);for(;t<=y;){let a=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0),s=a<w?w:a,n=r>y?y:r,l=ee(w,s),o=ee(s,n)+1;e.push({name:t.toLocaleDateString("en-US",{month:"short"}),year:t.getFullYear(),startDay:l,days:o}),t.setMonth(t.getMonth()+1)}return e},[w,y]),A=(0,s.useMemo)(()=>{let e=[],t=new Date(w),a=0;for(;t<=y;)("day"===n||"week"===n&&a%7==0||"month"===n&&1===t.getDate())&&e.push({day:t.getDate(),position:a*Y}),t.setDate(t.getDate()+1),a++;return e},[w,y,n,Y]),T=C>=0&&C<=F,j=(0,s.useCallback)(()=>{h.current&&u.current&&(u.current.scrollTop=h.current.scrollTop)},[]),R=(0,s.useCallback)(()=>{h.current&&u.current&&p.current&&(h.current.scrollTop=u.current.scrollTop,p.current.scrollLeft=u.current.scrollLeft)},[]);(0,s.useEffect)(()=>{if(u.current&&p.current&&k.length>0){let{left:e}=et(k[0],w,Y),t=Math.max(0,e-50);u.current.scrollLeft=t,p.current.scrollLeft=t}},[k,w,Y]);let M=d?v.size:0,_=e=>{f(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})};return(0,r.Y)(en,{delayDuration:200,children:(0,r.FD)("div",{className:"flex flex-col h-full bg-stone-800 dark:bg-stone-900 rounded-b-xl overflow-hidden",children:[(0,r.FD)("div",{className:"flex items-center justify-between px-4 py-3 bg-stone-800 dark:bg-stone-900 border-b border-stone-700",children:[(0,r.FD)("div",{children:[(0,r.Y)("h2",{className:"text-lg font-semibold text-white",children:m}),(0,r.FD)("p",{className:"text-sm text-stone-400",children:[k.length," of ",(a||t).length," tasks",d&&M>0&&(0,r.FD)("span",{className:"ml-2 text-red-400",children:["(",M," critical)"]})]})]}),(0,r.FD)("div",{className:"flex items-center gap-4 text-xs",children:[(0,r.FD)("div",{className:"flex items-center gap-1.5",children:[(0,r.Y)("span",{className:"w-2.5 h-2.5 rounded-full bg-teal-500"}),(0,r.Y)("span",{className:"text-stone-300",children:"Complete"})]}),(0,r.FD)("div",{className:"flex items-center gap-1.5",children:[(0,r.Y)("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500"}),(0,r.Y)("span",{className:"text-stone-300",children:"In Progress"})]}),(0,r.FD)("div",{className:"flex items-center gap-1.5",children:[(0,r.Y)("span",{className:"w-2.5 h-2.5 rounded-full bg-rose-400"}),(0,r.Y)("span",{className:"text-stone-300",children:"Not Started"})]}),d&&(0,r.FD)("div",{className:"flex items-center gap-1.5",children:[(0,r.Y)("span",{className:"w-2.5 h-2.5 rounded ring-2 ring-red-500 ring-offset-1 ring-offset-stone-800"}),(0,r.Y)("span",{className:"text-stone-300",children:"Critical"})]})]})]}),(0,r.FD)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.FD)("div",{className:"w-64 md:w-80 flex-shrink-0 bg-stone-50 dark:bg-stone-800 border-r border-stone-200 dark:border-stone-700 flex flex-col",children:[(0,r.Y)("div",{className:"h-[72px] px-4 flex items-end pb-2 bg-stone-100 dark:bg-stone-800 border-b border-stone-200 dark:border-stone-700 flex-shrink-0",children:(0,r.Y)("span",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:"Task Name"})}),(0,r.Y)("div",{ref:h,className:"flex-1 overflow-y-auto overflow-x-hidden",onScroll:j,children:(0,r.Y)(ei.Mp,{sensors:x,collisionDetection:ei.fp,onDragEnd:e=>{let{active:t,over:a}=e;if(a&&t.id!==a.id){let e=k.findIndex(e=>e.id===t.id),r=k.findIndex(e=>e.id===a.id),s=(0,ec.be)(k,e,r);null==c||c(s)}},children:(0,r.Y)(ec.gB,{items:k.map(e=>e.id),strategy:ec._G,children:k.map((e,t)=>{let a=d&&v.has(e.id),s=b.childTasksMap.has(e.id),n=!!e.parentId;return(0,r.Y)(eh,{task:e,index:t,isCritical:a,showCriticalPath:d,onTaskClick:i,hasSubtasks:s,isSubtask:n,isCollapsed:g.has(e.id),onToggleCollapse:()=>_(e.id)},e.id)})})})})]}),(0,r.FD)("div",{className:"flex-1 overflow-hidden flex flex-col min-w-0",children:[(0,r.Y)("div",{ref:p,className:"h-[72px] bg-stone-100 dark:bg-stone-800 border-b border-stone-200 dark:border-stone-700 relative flex-shrink-0 overflow-x-hidden",children:(0,r.FD)("div",{style:{width:F,minWidth:"100%"},className:"h-full relative",children:[(0,r.Y)("div",{className:"h-9 flex items-center border-b border-stone-200 dark:border-stone-700",children:S.map((e,t)=>(0,r.FD)("div",{className:"flex items-center justify-center text-xs font-medium text-stone-600 dark:text-stone-300 border-r border-stone-200 dark:border-stone-700 h-full flex-shrink-0",style:{width:e.days*Y},children:[e.name," ",e.year]},"".concat(e.name,"-").concat(e.year,"-").concat(t)))}),(0,r.FD)("div",{className:"h-[36px] relative",children:[A.map((e,t)=>(0,r.Y)("div",{className:"absolute top-0 h-full flex items-center justify-center text-[10px] text-stone-500 dark:text-stone-400",style:{left:e.position,width:"week"===n?7*Y:Y},children:e.day},"day-".concat(t))),T&&(0,r.Y)("div",{className:"absolute top-0 h-full flex flex-col items-center z-20",style:{left:C-20},children:(0,r.Y)("div",{className:"bg-orange-500 text-white text-[10px] px-1.5 py-0.5 rounded font-medium",children:"TODAY"})})]})]})}),(0,r.Y)("div",{ref:u,className:"flex-1 overflow-auto bg-stone-50 dark:bg-stone-800",onScroll:R,children:(0,r.FD)("div",{className:"relative",style:{width:F,minWidth:"100%",height:40*k.length},children:[Array.from({length:Math.ceil(D/("week"===n?7:1))}).map((e,t)=>(0,r.Y)("div",{className:"absolute top-0 bottom-0 border-l border-stone-200 dark:border-stone-700",style:{left:t*Y*("week"===n?7:1)}},"grid-".concat(t))),T&&(0,r.Y)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-orange-500 z-10",style:{left:C}}),k.map((e,t)=>{let{left:a,width:s}=et(e,w,Y),n=s*e.progress/100,l=d&&v.has(e.id),o=s>40,c=!!e.parentId;return(0,r.FD)("div",{className:"absolute flex items-center",style:{top:40*t,height:40,left:0,right:0},children:[(0,r.Y)("div",{className:"absolute inset-0 ".concat(t%2==0?"bg-stone-50 dark:bg-stone-800":"bg-white dark:bg-stone-900"," border-b border-stone-100 dark:border-stone-700")}),(0,r.FD)(el,{children:[(0,r.Y)(eo,{asChild:!0,children:(0,r.FD)("div",{className:"absolute h-6 rounded-md ".concat(function(e){switch(e){case"complete":return"bg-teal-200";case"in-progress":return"bg-amber-200";case"not-started":return"bg-stone-200 dark:bg-stone-600";default:return"bg-gray-200"}}(e.status)," cursor-pointer hover:opacity-90 transition-all overflow-hidden shadow-sm border ").concat("not-started"===e.status?"border-stone-400 dark:border-stone-500":"border-transparent"," ").concat(l?"ring-2 ring-red-500 ring-offset-1":""," ").concat(c?"h-5":""),style:{left:a+4,width:s},onClick:()=>null==i?void 0:i(e),onKeyDown:t=>"Enter"===t.key&&(null==i?void 0:i(e)),role:"button",tabIndex:0,children:[(0,r.Y)("div",{className:"h-full ".concat(function(e){switch(e){case"complete":return"bg-teal-500";case"in-progress":return"bg-orange-500";case"not-started":return"bg-rose-400";default:return"bg-gray-400"}}(e.status)," ").concat(e.progress<100?"rounded-l-md":"rounded-md"," ").concat(0===e.progress?"opacity-0":""),style:{width:0===e.progress?"100%":n}}),o&&e.progress>50&&(0,r.FD)("span",{className:"absolute inset-0 flex items-center justify-center text-[10px] font-semibold text-stone-800 dark:text-stone-900",children:[e.progress,"%"]}),o&&0===e.progress&&(0,r.Y)("span",{className:"absolute inset-0 flex items-center justify-center text-[10px] font-medium text-stone-500 dark:text-stone-400",children:"0%"})]})}),(0,r.Y)(ed,{side:"top",className:"bg-stone-900 text-white border-stone-700 px-3 py-2 max-w-xs",children:(0,r.FD)("div",{className:"space-y-1",children:[(0,r.Y)("p",{className:"font-semibold text-sm",children:e.name}),(0,r.FD)("div",{className:"text-xs text-stone-300 space-y-0.5",children:[(0,r.Y)("p",{children:function(e,t){let a=new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),r=new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return"".concat(a," - ").concat(r)}(e.startDate,e.endDate)}),(0,r.FD)("p",{children:["Duration: ",function(e){let t=ee(new Date(e.startDate),new Date(e.endDate))+1;if(1===t)return"1 day";if(t<7)return"".concat(t," days");if(t<14)return"1 week";let a=Math.round(t/7);return"".concat(a," weeks")}(e)]}),(0,r.FD)("p",{children:["Status: ",(0,r.Y)("span",{className:"font-medium ".concat("complete"===e.status?"text-teal-400":"in-progress"===e.status?"text-orange-400":"text-rose-400"),children:function(e){switch(e){case"complete":return"Complete";case"in-progress":return"In Progress";case"not-started":return"Not Started";default:return e}}(e.status)})]}),(0,r.FD)("p",{children:["Progress: ",e.progress,"%"]}),l&&(0,r.FD)("p",{className:"text-red-400 font-medium flex items-center gap-1",children:[(0,r.Y)(er.A,{className:"w-3 h-3"})," Critical Path"]}),e.dependencies&&e.dependencies.length>0&&(0,r.FD)("p",{children:["Dependencies: ",e.dependencies.length]})]})]})})]}),o&&e.progress<=50&&(0,r.FD)("span",{className:"absolute text-[10px] font-semibold text-stone-600 dark:text-stone-300 pointer-events-none",style:{left:a+s+8,top:"50%",transform:"translateY(-50%)"},children:[e.progress,"%"]})]},e.id)}),o&&(0,r.Y)("svg",{className:"absolute top-0 left-0 pointer-events-none z-20",style:{width:F,height:40*k.length},children:k.map(e=>e.dependencies?e.dependencies.map(t=>{let a=k.find(e=>e.id===t);if(!a)return null;let s=k.indexOf(a),n=k.indexOf(e),{left:l,width:o}=et(a,w,Y),{left:i}=et(e,w,Y),c=l+o+4,m=40*s+20,h=i+4,u=40*n+20,p=(c+h)/2,g=d&&v.has(e.id)&&v.has(t);return(0,r.Y)("path",{d:"M ".concat(c," ").concat(m," C ").concat(p," ").concat(m,", ").concat(p," ").concat(u,", ").concat(h," ").concat(u),fill:"none",stroke:g?"#ef4444":"#78716c",strokeWidth:g?"2":"1.5",strokeDasharray:g?"0":"4"},"dep-".concat(t,"-").concat(e.id))}):null)})]})})]})]})]})})}var ep=a(5821);let eg=ep.bL;ep.l9;let ef=ep.ZL;ep.bm;let ex=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(ep.hJ,{ref:t,className:i("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});ex.displayName=ep.hJ.displayName;let eb=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.FD)(ef,{children:[(0,r.Y)(ex,{}),(0,r.FD)(ep.UC,{ref:t,className:i("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.FD)(ep.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.Y)(Q.A,{className:"h-4 w-4"}),(0,r.Y)("span",{className:"sr-only",children:"Close"})]})]})]})});eb.displayName=ep.UC.displayName;let eN=e=>{let{className:t,...a}=e;return(0,r.Y)("div",{className:i("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};eN.displayName="DialogHeader";let ek=e=>{let{className:t,...a}=e;return(0,r.Y)("div",{className:i("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ek.displayName="DialogFooter";let ev=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(ep.hE,{ref:t,className:i("text-lg font-semibold leading-none tracking-tight",a),...s})});ev.displayName=ep.hE.displayName;let ew=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(ep.VY,{ref:t,className:i("text-sm text-muted-foreground",a),...s})});ew.displayName=ep.VY.displayName;var ey=a(2797);let eY=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),eD=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(ey.b,{ref:t,className:i(eY(),a),...s})});eD.displayName=ey.b.displayName;let eF=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)("textarea",{className:i("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});eF.displayName="Textarea";var eC=a(6981);let eS=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(eC.bL,{ref:t,className:i("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.Y)(eC.C1,{className:i("grid place-content-center text-current"),children:(0,r.Y)(p.A,{className:"h-4 w-4"})})})});eS.displayName=eC.bL.displayName;var eA=a(704);let eT=eA.bL,ej=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(eA.B8,{ref:t,className:i("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...s})});ej.displayName=eA.B8.displayName;let eR=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(eA.l9,{ref:t,className:i("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...s})});eR.displayName=eA.l9.displayName;let eM=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.Y)(eA.UC,{ref:t,className:i("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});eM.displayName=eA.UC.displayName;var e_=a(7655);let eP=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.FD)(e_.bL,{ref:t,className:i("relative overflow-hidden",a),...n,children:[(0,r.Y)(e_.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.Y)(ez,{}),(0,r.Y)(e_.OK,{})]})});eP.displayName=e_.bL.displayName;let ez=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...n}=e;return(0,r.Y)(e_.VM,{ref:t,orientation:s,className:i("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,r.Y)(e_.lr,{className:"relative flex-1 rounded-full bg-border"})})});ez.displayName=e_.VM.displayName;var eL=a(4541),eI=a(5731),eE=a(1008),eO=a(4063),eU=a(172),eB=a(1721),eK=a(3672),eV=a(6671);function eJ(e){let{open:t,onOpenChange:a,task:n,tasks:l,onSave:o,onDelete:d}=e,{user:i}=(0,eL.A)(),c=!!n,[h,u]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[f,x]=(0,s.useState)(""),[b,N]=(0,s.useState)("not-started"),[k,v]=(0,s.useState)(0),[w,y]=(0,s.useState)(!1),[Y,D]=(0,s.useState)([]),[F,C]=(0,s.useState)(""),[S,A]=(0,s.useState)(""),[T,j]=(0,s.useState)([]),[R,M]=(0,s.useState)(""),[_,P]=(0,s.useState)(!1),[z,L]=(0,s.useState)(!1);function I(e){return e.toISOString().split("T")[0]}async function O(){if(!R.trim()||!n)return;let e=Number(n.id);if(isNaN(e))return void eV.oR.error("Invalid task ID");L(!0);try{let t=await eI.Jg.create({task_id:e,user_id:i&&Number(i.id)||void 0,user_name:(null==i?void 0:i.name)||"Anonymous",content:R.trim()});if(t.success&&t.data){let e={id:String(t.data.id),taskId:String(t.data.task_id),userId:t.data.user_id?String(t.data.user_id):"anonymous",userName:t.data.user_name||"Anonymous",content:t.data.content,createdAt:new Date(t.data.created_at)};j([...T,e]),M(""),eV.oR.success("Comment added")}else eV.oR.error("Failed to add comment")}catch(e){eV.oR.error("Failed to add comment")}L(!1)}(0,s.useEffect)(()=>{async function e(){if(n&&t){let e=Number(n.id);if(!isNaN(e)){P(!0);try{let t=await eI.Jg.getByTask(e);if(t.success&&t.data){let e=t.data.map(e=>({id:String(e.id),taskId:String(e.task_id),userId:e.user_id?String(e.user_id):"anonymous",userName:e.user_name||"Anonymous",content:e.content,createdAt:new Date(e.created_at)}));j(e)}}catch(e){console.error("Failed to fetch comments:",e)}P(!1)}}}n?(u(n.name),g(I(new Date(n.startDate))),x(I(new Date(n.endDate))),N(n.status),v(n.progress),y(n.isMilestone||!1),D(n.dependencies||[]),C(n.parentId||""),A(n.notes||""),e()):(u(""),g(""),x(""),N("not-started"),v(0),y(!1),D([]),C(""),A(""),j([])),M("")},[n,t]);let U=l.filter(e=>e.id!==(null==n?void 0:n.id)&&e.parentId!==(null==n?void 0:n.id)),B=l.filter(e=>e.id!==(null==n?void 0:n.id)&&!e.parentId);return(0,r.Y)(eg,{open:t,onOpenChange:a,children:(0,r.FD)(eb,{className:"sm:max-w-[600px] max-h-[90vh] bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700",children:[(0,r.FD)(eN,{children:[(0,r.Y)(ev,{className:"text-stone-800 dark:text-white",children:c?"Edit Task":"Add New Task"}),(0,r.Y)(ew,{className:"text-stone-500 dark:text-stone-400",children:c?"Modify the task details below.":"Fill in the details for your new task."})]}),(0,r.FD)(eT,{defaultValue:"details",className:"w-full",children:[(0,r.FD)(ej,{className:"grid w-full grid-cols-2 dark:bg-stone-700",children:[(0,r.FD)(eR,{value:"details",className:"flex items-center gap-1.5 dark:data-[state=active]:bg-stone-600",children:[(0,r.Y)(eE.A,{className:"w-4 h-4"}),"Details"]}),(0,r.FD)(eR,{value:"comments",className:"flex items-center gap-1.5 dark:data-[state=active]:bg-stone-600",children:[(0,r.Y)(eO.A,{className:"w-4 h-4"}),"Comments ",T.length>0&&"(".concat(T.length,")")]})]}),(0,r.Y)(eM,{value:"details",className:"mt-4",children:(0,r.Y)(eP,{className:"h-[400px] pr-4",children:(0,r.FD)("div",{className:"grid gap-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"name",className:"text-stone-700 dark:text-stone-200",children:"Task Name"}),(0,r.Y)(E,{id:"name",value:h,onChange:e=>u(e.target.value),placeholder:"Enter task name",className:"border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white focus:border-orange-500 dark:focus:border-teal-500"})]}),(0,r.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"startDate",className:"text-stone-700 dark:text-stone-200",children:"Start Date"}),(0,r.Y)(E,{id:"startDate",type:"date",value:p,onChange:e=>g(e.target.value),className:"border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white focus:border-orange-500 dark:focus:border-teal-500"})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"endDate",className:"text-stone-700 dark:text-stone-200",children:"End Date"}),(0,r.Y)(E,{id:"endDate",type:"date",value:f,onChange:e=>x(e.target.value),className:"border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white focus:border-orange-500 dark:focus:border-teal-500"})]})]}),(0,r.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"status",className:"text-stone-700 dark:text-stone-200",children:"Status"}),(0,r.FD)(K,{value:b,onValueChange:e=>N(e),children:[(0,r.Y)(J,{className:"border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white",children:(0,r.Y)(V,{})}),(0,r.FD)(q,{className:"dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(H,{value:"not-started",children:"Not Started"}),(0,r.Y)(H,{value:"in-progress",children:"In Progress"}),(0,r.Y)(H,{value:"complete",children:"Complete"})]})]})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"progress",className:"text-stone-700 dark:text-stone-200",children:"Progress (%)"}),(0,r.Y)(E,{id:"progress",type:"number",min:"0",max:"100",value:k,onChange:e=>v(Number(e.target.value)),className:"border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white focus:border-orange-500 dark:focus:border-teal-500"})]})]}),(0,r.FD)("div",{className:"flex items-center gap-2",children:[(0,r.Y)(eS,{id:"milestone",checked:w,onCheckedChange:e=>y(e)}),(0,r.Y)(eD,{htmlFor:"milestone",className:"text-stone-700 dark:text-stone-200 cursor-pointer",children:"Mark as Milestone"})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"notes",className:"text-stone-700 dark:text-stone-200",children:"Notes"}),(0,r.Y)(eF,{id:"notes",value:S,onChange:e=>A(e.target.value),placeholder:"Add any notes or details about this task...",rows:3,className:"border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white resize-none"})]}),B.length>0&&(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"parentTask",className:"text-stone-700 dark:text-stone-200",children:"Parent Task (for subtask)"}),(0,r.FD)(K,{value:F||"none",onValueChange:e=>C("none"===e?"":e),children:[(0,r.Y)(J,{className:"border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white",children:(0,r.Y)(V,{placeholder:"None (top-level task)"})}),(0,r.FD)(q,{className:"dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(H,{value:"none",children:"None (top-level task)"}),B.map(e=>(0,r.Y)(H,{value:e.id,children:e.name},e.id))]})]})]}),U.length>0&&(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"text-stone-700 dark:text-stone-200",children:"Dependencies"}),(0,r.Y)("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2 border-stone-200 dark:border-stone-600 bg-white dark:bg-stone-700",children:U.map(e=>(0,r.FD)("div",{className:"flex items-center gap-2 py-1",children:[(0,r.Y)(eS,{id:"dep-".concat(e.id),checked:Y.includes(e.id),onCheckedChange:t=>{t?D([...Y,e.id]):D(Y.filter(t=>t!==e.id))}}),(0,r.Y)(eD,{htmlFor:"dep-".concat(e.id),className:"text-sm text-stone-600 dark:text-stone-300 cursor-pointer",children:e.name})]},e.id))})]})]})})}),(0,r.Y)(eM,{value:"comments",className:"mt-4",children:(0,r.FD)("div",{className:"h-[400px] flex flex-col",children:[(0,r.Y)(eP,{className:"flex-1 pr-4 mb-4",children:_?(0,r.FD)("div",{className:"flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 py-8",children:[(0,r.Y)(eU.A,{className:"w-8 h-8 mb-2 animate-spin text-teal-600"}),(0,r.Y)("p",{className:"text-sm",children:"Loading comments..."})]}):0===T.length?(0,r.FD)("div",{className:"flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 py-8",children:[(0,r.Y)(eO.A,{className:"w-12 h-12 mb-2 opacity-50"}),(0,r.Y)("p",{className:"text-sm",children:"No comments yet"}),(0,r.Y)("p",{className:"text-xs",children:"Be the first to add a comment"})]}):(0,r.Y)("div",{className:"space-y-3",children:T.map(e=>(0,r.FD)("div",{className:"p-3 bg-stone-50 dark:bg-stone-700 rounded-lg",children:[(0,r.FD)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.Y)("div",{className:"w-6 h-6 rounded-full bg-teal-100 dark:bg-teal-900 flex items-center justify-center",children:(0,r.Y)(eB.A,{className:"w-3.5 h-3.5 text-teal-600 dark:text-teal-400"})}),(0,r.Y)("span",{className:"text-sm font-medium text-stone-700 dark:text-stone-200",children:e.userName}),(0,r.Y)("span",{className:"text-xs text-stone-400 dark:text-stone-500",children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,r.Y)("p",{className:"text-sm text-stone-600 dark:text-stone-300 pl-8",children:e.content})]},e.id))})}),(0,r.FD)("div",{className:"flex gap-2 pt-2 border-t border-stone-200 dark:border-stone-600",children:[(0,r.Y)(E,{value:R,onChange:e=>M(e.target.value),placeholder:c?"Add a comment...":"Save task first to add comments",disabled:!c||z,className:"flex-1 border-stone-300 dark:border-stone-600 dark:bg-stone-700 dark:text-white",onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&c&&(e.preventDefault(),O())}}),(0,r.Y)(m,{type:"button",size:"icon",onClick:O,disabled:!R.trim()||!c||z,className:"bg-teal-600 hover:bg-teal-700 text-white",children:z?(0,r.Y)(eU.A,{className:"w-4 h-4 animate-spin"}):(0,r.Y)(eK.A,{className:"w-4 h-4"})})]})]})})]}),(0,r.FD)(ek,{className:"flex gap-2 mt-4",children:[c&&d&&(0,r.Y)(m,{type:"button",variant:"destructive",onClick:function(){n&&d&&(d(n.id),a(!1))},className:"mr-auto",children:"Delete"}),(0,r.Y)(m,{type:"button",variant:"outline",onClick:()=>a(!1),className:"border-stone-300 dark:border-stone-600 text-stone-700 dark:text-stone-200 dark:hover:bg-stone-700",children:"Cancel"}),(0,r.Y)(m,{type:"button",onClick:function(){h&&p&&f&&(o({id:(null==n?void 0:n.id)||Math.random().toString(36).substring(2,9),name:h,startDate:new Date(p),endDate:new Date(f),status:b,progress:k,isMilestone:w,dependencies:Y.length>0?Y:void 0,parentId:F||void 0,order:(null==n?void 0:n.order)||l.length+1,notes:S||void 0,comments:T.length>0?T:void 0}),a(!1))},className:"bg-stone-800 dark:bg-teal-600 hover:bg-stone-900 dark:hover:bg-teal-700 text-white",children:c?"Save Changes":"Add Task"})]})]})})}var eZ=a(4050);let eG=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...l}=e;return(0,r.Y)(eZ.b,{ref:t,decorative:n,orientation:s,className:i("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...l})});eG.displayName=eZ.b.displayName;let eq={logoLight:"/images/logo/ocf-logo.png",logoDark:"/images/logo/OCFLogoSTrans.png",logoFallbackText:"OCF",companyName:"Oasis Capital Finance",defaultProjectName:"OCF Bond Issuance Project",defaultProjectDescription:"Project Timeline & Task Management"},eH="gantt-app-settings";function eW(){try{let e=localStorage.getItem(eH);if(e){let t=JSON.parse(e);return{...eq,...t}}}catch(e){console.error("Failed to load settings:",e)}return eq}var eQ=a(3173),eX=a(8531);function e$(e){let{open:t,onOpenChange:a,onSettingsChange:n}=e,[l,o]=(0,s.useState)({...eq}),[d,i]=(0,s.useState)(""),[c,h]=(0,s.useState)(""),[u,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(t){let e=eW();o(e),i(e.logoLight),h(e.logoDark),p(!1),f(!1)}},[t]);let x=(e,t)=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(!r)return;let s=new FileReader;s.onload=e=>{var a;let r=null==(a=e.target)?void 0:a.result;"light"===t?(i(r),p(!1),o(e=>({...e,logoLight:r}))):(h(r),f(!1),o(e=>({...e,logoDark:r})))},s.readAsDataURL(r)};return(0,r.Y)(eg,{open:t,onOpenChange:a,children:(0,r.FD)(eb,{className:"sm:max-w-[550px] dark:bg-stone-900 dark:border-stone-700",children:[(0,r.FD)(eN,{children:[(0,r.FD)(ev,{className:"flex items-center gap-2 dark:text-white",children:[(0,r.Y)(eQ.A,{className:"w-5 h-5"}),"App Settings"]}),(0,r.Y)(ew,{className:"dark:text-stone-400",children:"Customize the branding and appearance of your Gantt chart application."})]}),(0,r.FD)("div",{className:"space-y-6 py-4",children:[(0,r.FD)("div",{className:"space-y-4",children:[(0,r.FD)("h3",{className:"text-sm font-semibold text-stone-700 dark:text-stone-300 flex items-center gap-2",children:[(0,r.Y)(Y.A,{className:"w-4 h-4"}),"Logo Settings"]}),(0,r.FD)("div",{className:"space-y-2",children:[(0,r.FD)(eD,{className:"flex items-center gap-2 text-stone-600 dark:text-stone-400",children:[(0,r.Y)(S.A,{className:"w-3.5 h-3.5"}),"Light Mode Logo"]}),(0,r.FD)("div",{className:"flex gap-3",children:[(0,r.Y)("div",{className:"flex-1",children:(0,r.Y)(E,{value:d,onChange:e=>{i(e.target.value),p(!1)},placeholder:"Enter logo URL or upload file...",className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"})}),(0,r.FD)("label",{className:"cursor-pointer",children:[(0,r.Y)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>x(e,"light")}),(0,r.Y)(m,{type:"button",variant:"outline",size:"icon",asChild:!0,children:(0,r.Y)("span",{children:(0,r.Y)(w.A,{className:"w-4 h-4"})})})]})]}),(0,r.Y)("div",{className:"h-12 bg-white border border-stone-200 rounded-lg flex items-center justify-center p-2",children:!u&&d?(0,r.Y)("img",{src:d,alt:"Light logo preview",className:"max-h-8 max-w-full object-contain",onError:()=>p(!0)}):(0,r.FD)("div",{className:"flex items-center gap-2 text-stone-400 text-sm",children:[(0,r.Y)("div",{className:"w-8 h-8 rounded bg-teal-600 flex items-center justify-center",children:(0,r.Y)("span",{className:"text-white font-bold text-xs",children:l.logoFallbackText})}),(0,r.Y)("span",{children:"Fallback logo"})]})})]}),(0,r.FD)("div",{className:"space-y-2",children:[(0,r.FD)(eD,{className:"flex items-center gap-2 text-stone-600 dark:text-stone-400",children:[(0,r.Y)(F.A,{className:"w-3.5 h-3.5"}),"Dark Mode Logo"]}),(0,r.FD)("div",{className:"flex gap-3",children:[(0,r.Y)("div",{className:"flex-1",children:(0,r.Y)(E,{value:c,onChange:e=>{h(e.target.value),f(!1)},placeholder:"Enter logo URL or upload file...",className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"})}),(0,r.FD)("label",{className:"cursor-pointer",children:[(0,r.Y)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>x(e,"dark")}),(0,r.Y)(m,{type:"button",variant:"outline",size:"icon",asChild:!0,children:(0,r.Y)("span",{children:(0,r.Y)(w.A,{className:"w-4 h-4"})})})]})]}),(0,r.Y)("div",{className:"h-12 bg-stone-800 border border-stone-700 rounded-lg flex items-center justify-center p-2",children:!g&&c?(0,r.Y)("img",{src:c,alt:"Dark logo preview",className:"max-h-8 max-w-full object-contain",onError:()=>f(!0)}):(0,r.FD)("div",{className:"flex items-center gap-2 text-stone-500 text-sm",children:[(0,r.Y)("div",{className:"w-8 h-8 rounded bg-teal-500 flex items-center justify-center",children:(0,r.Y)("span",{className:"text-white font-bold text-xs",children:l.logoFallbackText})}),(0,r.Y)("span",{children:"Fallback logo"})]})})]}),(0,r.FD)("div",{className:"space-y-2",children:[(0,r.Y)(eD,{className:"text-stone-600 dark:text-stone-400",children:"Fallback Logo Text"}),(0,r.Y)(E,{value:l.logoFallbackText,onChange:e=>o(t=>({...t,logoFallbackText:e.target.value.slice(0,5)})),placeholder:"OCF",maxLength:5,className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"}),(0,r.Y)("p",{className:"text-xs text-stone-500 dark:text-stone-500",children:"Shown when logo fails to load (max 5 characters)"})]})]}),(0,r.Y)(eG,{className:"dark:bg-stone-700"}),(0,r.FD)("div",{className:"space-y-4",children:[(0,r.FD)("h3",{className:"text-sm font-semibold text-stone-700 dark:text-stone-300 flex items-center gap-2",children:[(0,r.Y)(eQ.A,{className:"w-4 h-4"}),"Branding"]}),(0,r.FD)("div",{className:"space-y-2",children:[(0,r.Y)(eD,{className:"text-stone-600 dark:text-stone-400",children:"Company Name"}),(0,r.Y)(E,{value:l.companyName,onChange:e=>o(t=>({...t,companyName:e.target.value})),placeholder:"Oasis Capital Finance",className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"})]}),(0,r.FD)("div",{className:"space-y-2",children:[(0,r.Y)(eD,{className:"text-stone-600 dark:text-stone-400",children:"Default Project Name"}),(0,r.Y)(E,{value:l.defaultProjectName,onChange:e=>o(t=>({...t,defaultProjectName:e.target.value})),placeholder:"Project Name",className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"})]}),(0,r.FD)("div",{className:"space-y-2",children:[(0,r.Y)(eD,{className:"text-stone-600 dark:text-stone-400",children:"Default Project Description"}),(0,r.Y)(E,{value:l.defaultProjectDescription,onChange:e=>o(t=>({...t,defaultProjectDescription:e.target.value})),placeholder:"Project Timeline & Task Management",className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"})]})]})]}),(0,r.FD)(ek,{className:"gap-2 sm:gap-0",children:[(0,r.FD)(m,{type:"button",variant:"outline",onClick:()=>{let e=function(){try{localStorage.removeItem(eH)}catch(e){console.error("Failed to reset settings:",e)}return eq}();o(e),i(e.logoLight),h(e.logoDark),p(!1),f(!1),null==n||n(e)},className:"dark:border-stone-600 dark:text-stone-300 dark:hover:bg-stone-800",children:[(0,r.Y)(eX.A,{className:"w-4 h-4 mr-2"}),"Reset to Defaults"]}),(0,r.Y)(m,{type:"button",variant:"outline",onClick:()=>a(!1),className:"dark:border-stone-600 dark:text-stone-300 dark:hover:bg-stone-800",children:"Cancel"}),(0,r.Y)(m,{type:"button",onClick:()=>{let e=function(e){let t={...eW(),...e};try{localStorage.setItem(eH,JSON.stringify(t))}catch(e){console.error("Failed to save settings:",e)}return t}({...l,logoLight:d||l.logoLight,logoDark:c||l.logoDark});null==n||n(e),a(!1)},className:"bg-teal-600 hover:bg-teal-700 text-white",children:"Save Settings"})]})]})})}var e0=a(4260),e2=a(8112),e1=a(7082);let e5={admin:e2.A,manager:e1.A,client:eQ.A},e4={admin:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800",manager:"bg-teal-100 dark:bg-teal-900/30 text-teal-700 dark:text-teal-400 border-teal-200 dark:border-teal-800",client:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-800"};function e3(e){let{open:t,onOpenChange:a}=e,{login:s}=(0,eL.A)(),n=e=>{s(e),a(!1)},l=e0.HZ.filter(e=>"admin"===e.role),o=e0.HZ.filter(e=>"manager"===e.role),d=e0.HZ.filter(e=>"client"===e.role);return(0,r.Y)(eg,{open:t,onOpenChange:a,children:(0,r.FD)(eb,{className:"sm:max-w-[500px] bg-white dark:bg-stone-900 border-stone-200 dark:border-stone-700",children:[(0,r.FD)(eN,{children:[(0,r.FD)(ev,{className:"flex items-center gap-2 text-stone-800 dark:text-white",children:[(0,r.Y)(eB.A,{className:"w-5 h-5"}),"Select User"]}),(0,r.Y)(ew,{className:"text-stone-500 dark:text-stone-400",children:"Choose a demo user to log in. Different roles have different permissions."})]}),(0,r.FD)("div",{className:"space-y-4 py-4",children:[(0,r.FD)("div",{children:[(0,r.FD)("h3",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-2 flex items-center gap-1.5",children:[(0,r.Y)(e2.A,{className:"w-3.5 h-3.5"}),"Administrators"]}),(0,r.Y)("div",{className:"space-y-2",children:l.map(e=>(0,r.Y)(e7,{user:e,onSelect:n},e.id))})]}),(0,r.FD)("div",{children:[(0,r.FD)("h3",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-2 flex items-center gap-1.5",children:[(0,r.Y)(e1.A,{className:"w-3.5 h-3.5"}),"Managers"]}),(0,r.Y)("div",{className:"space-y-2",children:o.map(e=>(0,r.Y)(e7,{user:e,onSelect:n},e.id))})]}),(0,r.FD)("div",{children:[(0,r.FD)("h3",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-2 flex items-center gap-1.5",children:[(0,r.Y)(eQ.A,{className:"w-3.5 h-3.5"}),"Clients"]}),(0,r.Y)("div",{className:"space-y-2",children:d.map(e=>(0,r.Y)(e7,{user:e,onSelect:n},e.id))})]})]})]})})}function e7(e){let{user:t,onSelect:a}=e,s=e5[t.role];return(0,r.FD)("button",{type:"button",onClick:()=>a(t.id),className:"w-full p-3 rounded-lg border ".concat(e4[t.role]," hover:opacity-80 transition-all text-left flex items-center gap-3"),children:[(0,r.Y)("div",{className:"w-10 h-10 rounded-full bg-white dark:bg-stone-800 flex items-center justify-center shadow-sm",children:(0,r.Y)(s,{className:"w-5 h-5"})}),(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.Y)("p",{className:"font-medium truncate",children:t.name}),(0,r.Y)("p",{className:"text-xs opacity-70 truncate",children:t.email})]}),(0,r.Y)("span",{className:"text-xs font-medium uppercase opacity-60",children:t.role})]})}var e6=a(3349);let e8={admin:e2.A,manager:e1.A,client:eQ.A},e9={admin:"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400",manager:"bg-teal-100 dark:bg-teal-900/50 text-teal-700 dark:text-teal-400",client:"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-400"};function te(e){let{onLoginClick:t}=e,{user:a,logout:s,isAuthenticated:n}=(0,eL.A)();if(!n||!a)return(0,r.FD)(m,{variant:"outline",size:"sm",onClick:t,className:"border-stone-300 dark:border-stone-600 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-800",children:[(0,r.Y)(eB.A,{className:"w-4 h-4 mr-1.5"}),(0,r.Y)("span",{className:"hidden sm:inline",children:"Login"})]});let l=e8[a.role];return(0,r.FD)(f,{children:[(0,r.Y)(x,{asChild:!0,children:(0,r.FD)(m,{variant:"outline",size:"sm",className:"border-stone-300 dark:border-stone-600 text-stone-700 dark:text-stone-200 hover:bg-stone-100 dark:hover:bg-stone-800 gap-2",children:[(0,r.Y)("div",{className:"w-6 h-6 rounded-full bg-stone-200 dark:bg-stone-700 flex items-center justify-center",children:(0,r.Y)(l,{className:"w-3.5 h-3.5"})}),(0,r.Y)("span",{className:"hidden sm:inline max-w-[120px] truncate",children:a.name}),(0,r.Y)(U.A,{className:"w-3.5 h-3.5 opacity-50"})]})}),(0,r.FD)(b,{align:"end",className:"w-56 dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(k,{className:"font-normal",children:(0,r.FD)("div",{className:"flex flex-col space-y-1",children:[(0,r.Y)("p",{className:"text-sm font-medium dark:text-white",children:a.name}),(0,r.Y)("p",{className:"text-xs text-stone-500 dark:text-stone-400 truncate",children:a.email}),(0,r.Y)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full w-fit mt-1 ".concat(e9[a.role]),children:a.role.charAt(0).toUpperCase()+a.role.slice(1)})]})}),(0,r.Y)(v,{className:"dark:bg-stone-700"}),(0,r.FD)(N,{onClick:t,className:"dark:hover:bg-stone-700 cursor-pointer",children:[(0,r.Y)(eB.A,{className:"w-4 h-4 mr-2"}),"Switch User"]}),(0,r.Y)(v,{className:"dark:bg-stone-700"}),(0,r.FD)(N,{onClick:s,className:"text-red-600 dark:text-red-400 dark:hover:bg-stone-700 cursor-pointer",children:[(0,r.Y)(e6.A,{className:"w-4 h-4 mr-2"}),"Log out"]})]})]})}let tt=(0,l.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ta(e){let{className:t,variant:a,...s}=e;return(0,r.Y)("div",{className:i(tt({variant:a}),t),...s})}var tr=a(1794),ts=a(286),tn=a(3896),tl=a(5300),to=a(7607),td=a(1920),ti=a(7300);function tc(e){let{onProjectChange:t}=e,{user:a,projects:n,currentProject:l,setCurrentProject:o,createProject:d,allocateProjectToClient:i,getAllClients:c,templates:h,loadTemplates:u,getTemplateWithTasks:g}=(0,eL.A)(),[w,y]=(0,s.useState)(!1),[Y,D]=(0,s.useState)(!1),[F,C]=(0,s.useState)(""),[S,A]=(0,s.useState)(""),[j,R]=(0,s.useState)(""),[M,_]=(0,s.useState)(""),[z,L]=(0,s.useState)(""),[I,O]=(0,s.useState)(""),[B,Z]=(0,s.useState)(!1),[G,W]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(!1),[$,ee]=(0,s.useState)([]),[et,ea]=(0,s.useState)(!1),er=a&&(0,e0.UE)(a.role),es=a&&(0,e0.vn)(a.role),en=c();(0,s.useEffect)(()=>{w&&0===h.length&&u()},[w,h.length,u]),(0,s.useEffect)(()=>{w&&!z&&L(new Date().toISOString().split("T")[0])},[w,z]);let el=(0,s.useCallback)(async e=>{if(!e)return;ea(!0);let t=await g(Number(e));(null==t?void 0:t.tasks)&&ee(t.tasks),ea(!1)},[g]);(0,s.useEffect)(()=>{M&&Q&&el(M)},[M,Q,el]);let eo=h.find(e=>String(e.id)===M),ed=e=>{o(e),null==t||t(e)},ei=async()=>{if(F.trim()){if(M&&!z)return void eV.oR.error("Please select a start date for the project");Z(!0);try{let e=M?Number(M):void 0,a=M?z:void 0,r=await d(F,S,e,a,I||void 0);if(r){null==t||t(r);let e=null==eo?void 0:eo.name;e?eV.oR.success('Project created from "'.concat(e,'" template')):eV.oR.success("Project created"),ec()}else eV.oR.error("Failed to create project")}catch(e){eV.oR.error("Failed to create project")}Z(!1)}},ec=()=>{y(!1),C(""),A(""),_(""),L(""),O(""),X(!1),ee([])},em=async()=>{if(l&&j){W(!0);try{await i(l.id,j),eV.oR.success("Project allocated to client"),D(!1),R("")}catch(e){eV.oR.error("Failed to allocate project")}W(!1)}},eh=async()=>{!Q&&M&&0===$.length&&await el(M),X(!Q)},eu=e=>{if(!z)return"Day ".concat(e+1);let t=new Date(z);return t.setDate(t.getDate()+e),t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return l?(0,r.FD)(r.FK,{children:[(0,r.FD)(f,{children:[(0,r.Y)(x,{asChild:!0,children:(0,r.FD)(m,{variant:"outline",size:"sm",className:"border-stone-300 dark:border-stone-600 text-stone-700 dark:text-stone-200 hover:bg-stone-100 dark:hover:bg-stone-800 gap-2 max-w-[200px]",children:[(0,r.Y)(tr.A,{className:"w-4 h-4 flex-shrink-0"}),(0,r.Y)("span",{className:"truncate hidden sm:inline",children:l.name}),(0,r.Y)(U.A,{className:"w-3.5 h-3.5 opacity-50 flex-shrink-0"})]})}),(0,r.FD)(b,{align:"start",className:"w-64 dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(k,{className:"text-xs text-stone-500 dark:text-stone-400",children:"Projects"}),n.map(e=>(0,r.FD)(N,{onClick:()=>ed(e),className:"dark:hover:bg-stone-700 cursor-pointer flex items-center justify-between",children:[(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.Y)("p",{className:"truncate dark:text-white",children:e.name}),e.clientName&&(0,r.FD)("p",{className:"text-xs text-stone-500 dark:text-stone-400 flex items-center gap-1",children:[(0,r.Y)(ts.A,{className:"w-3 h-3"}),e.clientName]})]}),l.id===e.id&&(0,r.Y)(p.A,{className:"w-4 h-4 text-teal-600 dark:text-teal-400 flex-shrink-0 ml-2"})]},e.id)),er&&(0,r.FD)(r.FK,{children:[(0,r.Y)(v,{className:"dark:bg-stone-700"}),(0,r.FD)(N,{onClick:()=>y(!0),className:"dark:hover:bg-stone-700 cursor-pointer text-teal-600 dark:text-teal-400",children:[(0,r.Y)(T.A,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),es&&l&&(0,r.FD)(N,{onClick:()=>D(!0),className:"dark:hover:bg-stone-700 cursor-pointer",children:[(0,r.Y)(tn.A,{className:"w-4 h-4 mr-2"}),"Allocate to Client"]})]})]}),(0,r.Y)(eg,{open:w,onOpenChange:e=>!e&&ec(),children:(0,r.FD)(eb,{className:"dark:bg-stone-900 dark:border-stone-700 ".concat(Q&&$.length>0?"sm:max-w-[800px]":"sm:max-w-[500px]"),children:[(0,r.FD)(eN,{children:[(0,r.Y)(ev,{className:"dark:text-white",children:"Create New Project"}),(0,r.Y)(ew,{className:"dark:text-stone-400",children:"Select a template to pre-populate tasks, or create an empty project."})]}),(0,r.FD)("div",{className:"flex gap-4 ".concat(Q&&$.length>0?"flex-row":"flex-col"),children:[(0,r.FD)("div",{className:"grid gap-4 py-4 ".concat(Q&&$.length>0?"w-1/2":"w-full"),children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.FD)(eD,{htmlFor:"template",className:"dark:text-stone-200 flex items-center gap-1.5",children:[(0,r.Y)(tl.A,{className:"w-4 h-4"}),"Project Template"]}),(0,r.FD)(K,{value:M||"none",onValueChange:e=>{_("none"===e?"":e),ee([])},children:[(0,r.Y)(J,{className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white",children:(0,r.Y)(V,{placeholder:"Select a template..."})}),(0,r.FD)(q,{className:"dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(H,{value:"none",children:(0,r.Y)("span",{className:"text-stone-500",children:"No template (empty project)"})}),h.map(e=>(0,r.Y)(H,{value:String(e.id),children:(0,r.FD)("div",{className:"flex flex-col",children:[(0,r.Y)("span",{children:e.name}),(0,r.FD)("span",{className:"text-xs text-stone-500",children:[e.taskCount," tasks, ~",e.totalDurationDays," days"]})]})},e.id))]})]}),eo&&(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.Y)("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:eo.description||"".concat(eo.taskCount," tasks over ").concat(eo.totalDurationDays," days")}),(0,r.FD)(m,{type:"button",variant:"ghost",size:"sm",onClick:eh,className:"text-xs text-teal-600 dark:text-teal-400 h-6 px-2",children:[(0,r.Y)(to.A,{className:"w-3 h-3 mr-1"}),Q?"Hide":"Preview"," Tasks"]})]})]}),M&&(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.FD)(eD,{htmlFor:"startDate",className:"dark:text-stone-200 flex items-center gap-1.5",children:[(0,r.Y)(td.A,{className:"w-4 h-4"}),"Project Start Date"]}),(0,r.Y)(E,{id:"startDate",type:"date",value:z,onChange:e=>L(e.target.value),className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"}),(0,r.Y)("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"All task dates will be calculated from this start date"})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"name",className:"dark:text-stone-200",children:"Project Name"}),(0,r.Y)(E,{id:"name",value:F,onChange:e=>C(e.target.value),placeholder:"Enter project name",className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.FD)(eD,{htmlFor:"description",className:"dark:text-stone-200",children:["Description ",(0,r.Y)("span",{className:"text-stone-400 text-xs",children:"(optional)"})]}),(0,r.Y)(E,{id:"description",value:S,onChange:e=>A(e.target.value),placeholder:"Brief project description",className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white"})]}),en.length>0&&(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.FD)(eD,{htmlFor:"projectClient",className:"dark:text-stone-200 flex items-center gap-1.5",children:[(0,r.Y)(ts.A,{className:"w-4 h-4"}),"Assign to Client ",(0,r.Y)("span",{className:"text-stone-400 text-xs",children:"(optional)"})]}),(0,r.FD)(K,{value:I||"none",onValueChange:e=>O("none"===e?"":e),children:[(0,r.Y)(J,{className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white",children:(0,r.Y)(V,{placeholder:"Select a client..."})}),(0,r.FD)(q,{className:"dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(H,{value:"none",children:(0,r.Y)("span",{className:"text-stone-500",children:"No client assigned"})}),en.map(e=>(0,r.Y)(H,{value:e.id,children:e.name},e.id))]})]})]})]}),Q&&M&&(0,r.FD)("div",{className:"w-1/2 border-l border-stone-200 dark:border-stone-700 pl-4 py-4",children:[(0,r.FD)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.Y)("h4",{className:"text-sm font-medium dark:text-white",children:"Task Preview"}),(0,r.FD)(ta,{variant:"secondary",className:"text-xs",children:[$.length," tasks"]})]}),et?(0,r.Y)("div",{className:"flex items-center justify-center h-40",children:(0,r.Y)(eU.A,{className:"w-6 h-6 animate-spin text-teal-600"})}):(0,r.Y)(eP,{className:"h-[350px] pr-3",children:(0,r.Y)("div",{className:"space-y-2",children:$.map((e,t)=>(0,r.Y)("div",{className:"p-2 bg-stone-50 dark:bg-stone-800 rounded-md border border-stone-200 dark:border-stone-700",children:(0,r.FD)("div",{className:"flex items-start gap-2",children:[(0,r.FD)("span",{className:"text-xs text-stone-400 dark:text-stone-500 w-5 flex-shrink-0",children:[t+1,"."]}),(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.FD)("div",{className:"flex items-center gap-1.5",children:[(0,r.Y)("span",{className:"text-sm font-medium dark:text-white truncate",children:e.name}),e.isMilestone&&(0,r.Y)(ti.A,{className:"w-3 h-3 text-orange-500 flex-shrink-0"})]}),(0,r.FD)("div",{className:"flex items-center gap-2 mt-1 text-xs text-stone-500 dark:text-stone-400",children:[(0,r.FD)("span",{className:"flex items-center gap-0.5",children:[(0,r.Y)(td.A,{className:"w-3 h-3"}),eu(e.daysFromStart)]}),(0,r.FD)("span",{className:"flex items-center gap-0.5",children:[(0,r.Y)(P.A,{className:"w-3 h-3"}),e.durationDays,"d"]}),"medium"!==e.priority&&(0,r.Y)(ta,{variant:"outline",className:"text-[10px] px-1 py-0 h-4 ".concat("critical"===e.priority?"border-red-500 text-red-500":"high"===e.priority?"border-orange-500 text-orange-500":"border-stone-400 text-stone-400"),children:e.priority})]})]})]})},e.id))})})]})]}),(0,r.FD)(ek,{children:[(0,r.Y)(m,{variant:"outline",onClick:ec,className:"dark:border-stone-600 dark:text-stone-300",children:"Cancel"}),(0,r.Y)(m,{onClick:ei,disabled:B||!F.trim(),className:"bg-teal-600 hover:bg-teal-700 text-white",children:B?(0,r.FD)(r.FK,{children:[(0,r.Y)(eU.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):M?"Create with ".concat((null==eo?void 0:eo.taskCount)||0," Tasks"):"Create Empty Project"})]})]})}),(0,r.Y)(eg,{open:Y,onOpenChange:D,children:(0,r.FD)(eb,{className:"sm:max-w-[425px] dark:bg-stone-900 dark:border-stone-700",children:[(0,r.FD)(eN,{children:[(0,r.Y)(ev,{className:"dark:text-white",children:"Allocate to Client"}),(0,r.Y)(ew,{className:"dark:text-stone-400",children:"Assign this project to a client so they can view progress."})]}),(0,r.FD)("div",{className:"grid gap-4 py-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"dark:text-stone-200",children:"Project"}),(0,r.Y)("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:null==l?void 0:l.name})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"client",className:"dark:text-stone-200",children:"Select Client"}),(0,r.FD)(K,{value:j||"none",onValueChange:e=>R("none"===e?"":e),children:[(0,r.Y)(J,{className:"dark:bg-stone-800 dark:border-stone-700 dark:text-white",children:(0,r.Y)(V,{placeholder:"Choose a client..."})}),(0,r.FD)(q,{className:"dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(H,{value:"none",children:"No client"}),en.map(e=>(0,r.Y)(H,{value:e.id,children:e.name},e.id))]})]})]})]}),(0,r.FD)(ek,{children:[(0,r.Y)(m,{variant:"outline",onClick:()=>D(!1),className:"dark:border-stone-600 dark:text-stone-300",children:"Cancel"}),(0,r.Y)(m,{onClick:em,disabled:G,className:"bg-teal-600 hover:bg-teal-700 text-white",children:G?(0,r.FD)(r.FK,{children:[(0,r.Y)(eU.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Allocating..."]}):"Allocate"})]})]})})]}):(0,r.FD)(m,{variant:"outline",size:"sm",onClick:()=>er&&y(!0),className:"border-stone-300 dark:border-stone-600 text-stone-600 dark:text-stone-300",children:[(0,r.Y)(tr.A,{className:"w-4 h-4 mr-1.5"}),"No Project"]})}var tm=a(5943),th=a(7223),tu=a(9119);let tp=[{value:"bond_issuance",label:"Bond Issuance"},{value:"equity_raise",label:"Equity Raise"},{value:"merger_acquisition",label:"Merger & Acquisition"},{value:"ipo",label:"IPO"},{value:"private_placement",label:"Private Placement"},{value:"restructuring",label:"Restructuring"},{value:"other",label:"Other"}],tg=[{value:"#14b8a6",label:"Teal"},{value:"#f97316",label:"Orange"},{value:"#8b5cf6",label:"Purple"},{value:"#3b82f6",label:"Blue"},{value:"#22c55e",label:"Green"},{value:"#ef4444",label:"Red"},{value:"#eab308",label:"Yellow"},{value:"#ec4899",label:"Pink"}];function tf(e){var t,a;let{open:n,onOpenChange:l,onTemplatesChanged:o}=e,[d,i]=(0,s.useState)([]),[c,h]=(0,s.useState)(null),[u,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[N,k]=(0,s.useState)(null),[v,w]=(0,s.useState)({name:"",description:"",projectType:"bond_issuance",color:"#14b8a6"}),[y,Y]=(0,s.useState)(!1),[D,F]=(0,s.useState)(null),[C,S]=(0,s.useState)({name:"",description:"",daysFromStart:0,durationDays:1,priority:"medium",isMilestone:!1}),A=(0,s.useCallback)(async()=>{p(!0);try{let e=await eI.E3.getAll();e.success&&e.data&&i(e.data)}catch(e){eV.oR.error("Failed to load templates")}p(!1)},[]),j=(0,s.useCallback)(async e=>{try{let t=await eI.E3.get(e);t.success&&t.data&&h(t.data)}catch(e){eV.oR.error("Failed to load template details")}},[]);(0,s.useEffect)(()=>{n&&A()},[n,A]);let R=e=>{k(e),w({name:e.name,description:e.description,projectType:e.project_type,color:e.color}),b(!0)},M=async()=>{if(!v.name.trim())return void eV.oR.error("Template name is required");f(!0);try{if(N)(await eI.E3.update(N.id,{name:v.name,description:v.description,project_type:v.projectType,color:v.color})).success&&(eV.oR.success("Template updated"),A(),(null==c?void 0:c.id)===N.id&&j(N.id));else{let e=await eI.E3.create({name:v.name,description:v.description,project_type:v.projectType,color:v.color});e.success&&e.data&&(eV.oR.success("Template created"),A(),h(e.data))}b(!1),null==o||o()}catch(e){eV.oR.error("Failed to save template")}f(!1)},_=async e=>{if(confirm("Are you sure you want to delete this template?"))try{(await eI.E3.delete(e)).success&&(eV.oR.success("Template deleted"),A(),(null==c?void 0:c.id)===e&&h(null),null==o||o())}catch(e){eV.oR.error("Failed to delete template")}},z=e=>{F(e),S({name:e.name,description:e.description,daysFromStart:e.days_from_start,durationDays:e.duration_days,priority:e.priority,isMilestone:e.is_milestone}),Y(!0)},L=async()=>{if(!C.name.trim())return void eV.oR.error("Task name is required");if(c){f(!0);try{if(D){let e=await eI.E3.updateTask(D.id,{name:C.name,description:C.description,days_from_start:C.daysFromStart,duration_days:C.durationDays,priority:C.priority,is_milestone:C.isMilestone});e.success&&e.data&&(eV.oR.success("Task updated"),h(e.data))}else{let e=await eI.E3.addTask(c.id,{name:C.name,description:C.description,days_from_start:C.daysFromStart,duration_days:C.durationDays,priority:C.priority,is_milestone:C.isMilestone});e.success&&e.data&&(eV.oR.success("Task added"),h(e.data))}Y(!1),A()}catch(e){eV.oR.error("Failed to save task")}f(!1)}},I=async e=>{if(confirm("Are you sure you want to delete this task?"))try{let t=await eI.E3.deleteTask(e);t.success&&t.data&&(eV.oR.success("Task deleted"),h(t.data),A())}catch(e){eV.oR.error("Failed to delete task")}};return(0,r.Y)(eg,{open:n,onOpenChange:l,children:(0,r.FD)(eb,{className:"sm:max-w-[900px] h-[80vh] dark:bg-stone-900 dark:border-stone-700 flex flex-col",children:[(0,r.FD)(eN,{children:[(0,r.FD)(ev,{className:"dark:text-white flex items-center gap-2",children:[(0,r.Y)(tl.A,{className:"w-5 h-5"}),"Template Manager"]}),(0,r.Y)(ew,{className:"dark:text-stone-400",children:"Create and manage project templates with predefined tasks."})]}),(0,r.FD)("div",{className:"flex-1 flex gap-4 overflow-hidden",children:[(0,r.FD)("div",{className:"w-1/3 border-r border-stone-200 dark:border-stone-700 pr-4",children:[(0,r.FD)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.Y)("h3",{className:"text-sm font-medium dark:text-white",children:"Templates"}),(0,r.FD)(m,{size:"sm",onClick:()=>{k(null),w({name:"",description:"",projectType:"bond_issuance",color:"#14b8a6"}),b(!0)},className:"h-7 px-2 bg-teal-600 hover:bg-teal-700 text-white",children:[(0,r.Y)(T.A,{className:"w-3.5 h-3.5 mr-1"}),"New"]})]}),u?(0,r.Y)("div",{className:"flex items-center justify-center h-40",children:(0,r.Y)(eU.A,{className:"w-6 h-6 animate-spin text-teal-600"})}):(0,r.Y)(eP,{className:"h-[calc(100%-40px)]",children:(0,r.FD)("div",{className:"space-y-2 pr-2",children:[d.map(e=>(0,r.FD)("div",{className:"p-3 rounded-lg border cursor-pointer transition-colors ".concat((null==c?void 0:c.id)===e.id?"border-teal-500 bg-teal-50 dark:bg-teal-900/20":"border-stone-200 dark:border-stone-700 hover:bg-stone-50 dark:hover:bg-stone-800"),onClick:()=>j(e.id),children:[(0,r.FD)("div",{className:"flex items-center gap-2",children:[(0,r.Y)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,r.Y)("span",{className:"font-medium dark:text-white truncate",children:e.name})]}),(0,r.FD)("div",{className:"flex items-center gap-2 mt-1 text-xs text-stone-500",children:[(0,r.Y)(ta,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:e.project_type.replace("_"," ")}),(0,r.FD)("span",{children:[e.task_count," tasks"]})]})]},e.id)),0===d.length&&(0,r.Y)("p",{className:"text-sm text-stone-500 dark:text-stone-400 text-center py-8",children:"No templates yet. Create your first one!"})]})})]}),(0,r.Y)("div",{className:"flex-1 overflow-hidden",children:c?(0,r.FD)("div",{className:"h-full flex flex-col",children:[(0,r.FD)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.FD)("div",{children:[(0,r.FD)("div",{className:"flex items-center gap-2",children:[(0,r.Y)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:c.color}}),(0,r.Y)("h3",{className:"text-lg font-semibold dark:text-white",children:c.name})]}),c.description&&(0,r.Y)("p",{className:"text-sm text-stone-500 dark:text-stone-400 mt-1",children:c.description}),(0,r.FD)("div",{className:"flex items-center gap-3 mt-2 text-xs text-stone-500",children:[(0,r.Y)(ta,{variant:"secondary",children:c.project_type.replace("_"," ")}),(0,r.FD)("span",{children:[(null==(t=c.tasks)?void 0:t.length)||0," tasks"]}),(0,r.FD)("span",{children:["~",c.total_duration_days," days"]})]})]}),(0,r.FD)("div",{className:"flex items-center gap-1",children:[(0,r.Y)(m,{variant:"ghost",size:"sm",onClick:()=>R(c),className:"h-8 px-2",children:(0,r.Y)(tm.A,{className:"w-4 h-4"})}),(0,r.Y)(m,{variant:"ghost",size:"sm",onClick:()=>_(c.id),className:"h-8 px-2 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:(0,r.Y)(th.A,{className:"w-4 h-4"})})]})]}),(0,r.FD)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.Y)("h4",{className:"text-sm font-medium dark:text-white",children:"Template Tasks"}),(0,r.FD)(m,{size:"sm",onClick:()=>{var e;F(null),S({name:"",description:"",daysFromStart:(null==c||null==(e=c.tasks)?void 0:e.length)?Math.max(...c.tasks.map(e=>e.days_from_start+e.duration_days)):0,durationDays:1,priority:"medium",isMilestone:!1}),Y(!0)},className:"h-7 px-2 bg-teal-600 hover:bg-teal-700 text-white",children:[(0,r.Y)(T.A,{className:"w-3.5 h-3.5 mr-1"}),"Add Task"]})]}),(0,r.Y)(eP,{className:"flex-1",children:(0,r.FD)("div",{className:"space-y-2 pr-2",children:[null==(a=c.tasks)?void 0:a.map((e,t)=>(0,r.Y)("div",{className:"p-3 bg-stone-50 dark:bg-stone-800 rounded-lg border border-stone-200 dark:border-stone-700",children:(0,r.FD)("div",{className:"flex items-start justify-between",children:[(0,r.FD)("div",{className:"flex items-start gap-2",children:[(0,r.FD)("span",{className:"text-xs text-stone-400 w-5 flex-shrink-0 mt-0.5",children:[t+1,"."]}),(0,r.FD)("div",{children:[(0,r.FD)("div",{className:"flex items-center gap-1.5",children:[(0,r.Y)("span",{className:"font-medium dark:text-white",children:e.name}),e.is_milestone&&(0,r.Y)(ti.A,{className:"w-3.5 h-3.5 text-orange-500"})]}),(0,r.FD)("div",{className:"flex items-center gap-3 mt-1 text-xs text-stone-500",children:[(0,r.FD)("span",{className:"flex items-center gap-1",children:[(0,r.Y)(td.A,{className:"w-3 h-3"}),"Day ",e.days_from_start+1]}),(0,r.FD)("span",{className:"flex items-center gap-1",children:[(0,r.Y)(P.A,{className:"w-3 h-3"}),e.duration_days,"d"]}),(0,r.Y)(ta,{variant:"outline",className:"text-[10px] px-1.5 py-0 ".concat("critical"===e.priority?"border-red-500 text-red-500":"high"===e.priority?"border-orange-500 text-orange-500":"low"===e.priority?"border-stone-400 text-stone-400":"border-stone-300 text-stone-500"),children:e.priority})]})]})]}),(0,r.FD)("div",{className:"flex items-center gap-1",children:[(0,r.Y)(m,{variant:"ghost",size:"sm",onClick:()=>z(e),className:"h-6 w-6 p-0",children:(0,r.Y)(tm.A,{className:"w-3 h-3"})}),(0,r.Y)(m,{variant:"ghost",size:"sm",onClick:()=>I(e.id),className:"h-6 w-6 p-0 text-red-500 hover:text-red-600",children:(0,r.Y)(th.A,{className:"w-3 h-3"})})]})]})},e.id)),(!c.tasks||0===c.tasks.length)&&(0,r.Y)("p",{className:"text-sm text-stone-500 dark:text-stone-400 text-center py-8",children:"No tasks yet. Add tasks to this template."})]})})]}):(0,r.Y)("div",{className:"h-full flex items-center justify-center text-stone-500 dark:text-stone-400",children:(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)(tl.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,r.Y)("p",{children:"Select a template to view details"}),(0,r.Y)("p",{className:"text-sm",children:"or create a new one"})]})})})]}),(0,r.Y)(eg,{open:x,onOpenChange:b,children:(0,r.FD)(eb,{className:"sm:max-w-[450px] dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(eN,{children:(0,r.Y)(ev,{className:"dark:text-white",children:N?"Edit Template":"Create Template"})}),(0,r.FD)("div",{className:"grid gap-4 py-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"templateName",className:"dark:text-stone-200",children:"Template Name"}),(0,r.Y)(E,{id:"templateName",value:v.name,onChange:e=>w({...v,name:e.target.value}),placeholder:"e.g., Bond Issuance",className:"dark:bg-stone-700 dark:border-stone-600"})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"templateDesc",className:"dark:text-stone-200",children:"Description"}),(0,r.Y)(eF,{id:"templateDesc",value:v.description,onChange:e=>w({...v,description:e.target.value}),placeholder:"Brief description of this template",rows:2,className:"dark:bg-stone-700 dark:border-stone-600 resize-none"})]}),(0,r.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"dark:text-stone-200",children:"Project Type"}),(0,r.FD)(K,{value:v.projectType,onValueChange:e=>w({...v,projectType:e}),children:[(0,r.Y)(J,{className:"dark:bg-stone-700 dark:border-stone-600",children:(0,r.Y)(V,{})}),(0,r.Y)(q,{className:"dark:bg-stone-700 dark:border-stone-600",children:tp.map(e=>(0,r.Y)(H,{value:e.value,children:e.label},e.value))})]})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"dark:text-stone-200",children:"Color"}),(0,r.FD)(K,{value:v.color,onValueChange:e=>w({...v,color:e}),children:[(0,r.Y)(J,{className:"dark:bg-stone-700 dark:border-stone-600",children:(0,r.FD)("div",{className:"flex items-center gap-2",children:[(0,r.Y)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.color}}),(0,r.Y)(V,{})]})}),(0,r.Y)(q,{className:"dark:bg-stone-700 dark:border-stone-600",children:tg.map(e=>(0,r.Y)(H,{value:e.value,children:(0,r.FD)("div",{className:"flex items-center gap-2",children:[(0,r.Y)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.value}}),e.label]})},e.value))})]})]})]})]}),(0,r.FD)(ek,{children:[(0,r.Y)(m,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,r.FD)(m,{onClick:M,disabled:g,className:"bg-teal-600 hover:bg-teal-700 text-white",children:[g?(0,r.Y)(eU.A,{className:"w-4 h-4 animate-spin"}):(0,r.Y)(tu.A,{className:"w-4 h-4 mr-1"}),N?"Update":"Create"]})]})]})}),(0,r.Y)(eg,{open:y,onOpenChange:Y,children:(0,r.FD)(eb,{className:"sm:max-w-[450px] dark:bg-stone-800 dark:border-stone-700",children:[(0,r.Y)(eN,{children:(0,r.Y)(ev,{className:"dark:text-white",children:D?"Edit Task":"Add Task"})}),(0,r.FD)("div",{className:"grid gap-4 py-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{htmlFor:"taskName",className:"dark:text-stone-200",children:"Task Name"}),(0,r.Y)(E,{id:"taskName",value:C.name,onChange:e=>S({...C,name:e.target.value}),placeholder:"e.g., Due Diligence Review",className:"dark:bg-stone-700 dark:border-stone-600"})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.FD)(eD,{htmlFor:"taskDesc",className:"dark:text-stone-200",children:["Description ",(0,r.Y)("span",{className:"text-stone-400 text-xs",children:"(optional)"})]}),(0,r.Y)(eF,{id:"taskDesc",value:C.description,onChange:e=>S({...C,description:e.target.value}),rows:2,className:"dark:bg-stone-700 dark:border-stone-600 resize-none"})]}),(0,r.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"dark:text-stone-200",children:"Days from Start"}),(0,r.Y)(E,{type:"number",min:"0",value:C.daysFromStart,onChange:e=>S({...C,daysFromStart:Number(e.target.value)}),className:"dark:bg-stone-700 dark:border-stone-600"}),(0,r.FD)("p",{className:"text-xs text-stone-400",children:["Task starts on day ",C.daysFromStart+1]})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"dark:text-stone-200",children:"Duration (days)"}),(0,r.Y)(E,{type:"number",min:"1",value:C.durationDays,onChange:e=>S({...C,durationDays:Math.max(1,Number(e.target.value))}),className:"dark:bg-stone-700 dark:border-stone-600"})]})]}),(0,r.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"dark:text-stone-200",children:"Priority"}),(0,r.FD)(K,{value:C.priority,onValueChange:e=>S({...C,priority:e}),children:[(0,r.Y)(J,{className:"dark:bg-stone-700 dark:border-stone-600",children:(0,r.Y)(V,{})}),(0,r.FD)(q,{className:"dark:bg-stone-700 dark:border-stone-600",children:[(0,r.Y)(H,{value:"low",children:"Low"}),(0,r.Y)(H,{value:"medium",children:"Medium"}),(0,r.Y)(H,{value:"high",children:"High"}),(0,r.Y)(H,{value:"critical",children:"Critical"})]})]})]}),(0,r.FD)("div",{className:"grid gap-2",children:[(0,r.Y)(eD,{className:"dark:text-stone-200",children:"Milestone"}),(0,r.FD)("div",{className:"flex items-center gap-2 h-10",children:[(0,r.Y)(eS,{id:"isMilestone",checked:C.isMilestone,onCheckedChange:e=>S({...C,isMilestone:e})}),(0,r.Y)(eD,{htmlFor:"isMilestone",className:"text-sm dark:text-stone-300 cursor-pointer",children:"Mark as milestone"})]})]})]})]}),(0,r.FD)(ek,{children:[(0,r.Y)(m,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),(0,r.FD)(m,{onClick:L,disabled:g,className:"bg-teal-600 hover:bg-teal-700 text-white",children:[g?(0,r.Y)(eU.A,{className:"w-4 h-4 animate-spin"}):(0,r.Y)(tu.A,{className:"w-4 h-4 mr-1"}),D?"Update":"Add"]})]})]})})]})})}function tx(e){var t;return{id:String(e.id),name:e.name,startDate:new Date(e.start_date),endDate:new Date(e.end_date),progress:e.progress,status:e.status,isMilestone:e.is_milestone,order:e.task_order,dependencies:null==(t=e.dependencies)?void 0:t.map(String),parentId:e.parent_id?String(e.parent_id):void 0,notes:e.notes||void 0,color:e.color||void 0}}function tb(e,t){var a;return{project_id:t,name:e.name,description:"",notes:e.notes||"",start_date:e.startDate instanceof Date?e.startDate.toISOString().split("T")[0]:new Date(e.startDate).toISOString().split("T")[0],end_date:e.endDate instanceof Date?e.endDate.toISOString().split("T")[0]:new Date(e.endDate).toISOString().split("T")[0],progress:e.progress,status:e.status,is_milestone:e.isMilestone||!1,task_order:e.order,dependencies:null==(a=e.dependencies)?void 0:a.map(Number).filter(e=>!isNaN(e)),parent_id:e.parentId?Number(e.parentId):null,color:e.color||null}}var tN=a(7280),tk=a(5675),tv=a(7605);function tw(){let{user:e,currentProject:t,isAuthenticated:n,loading:l}=(0,eL.A)(),{tasks:o,loading:d,error:i,refetch:c,createTask:h,updateTask:u,deleteTask:p,reorderTasks:g}=function(e){let[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),d=(0,s.useCallback)(async()=>{if(!e){a([]),n(!1);return}n(!0),o(null);let t=await eI.bI.getByProject(e);if(t.success&&t.data){let e=t.data.map(tx);e.sort((e,t)=>{let a=new Date(e.startDate).getTime()-new Date(t.startDate).getTime();return 0!==a?a:new Date(e.endDate).getTime()-new Date(t.endDate).getTime()}),a(e)}else o(t.error||"Failed to fetch tasks"),a([]);n(!1)},[e]);(0,s.useEffect)(()=>{d()},[d]);let i=e=>[...e].sort((e,t)=>{let a=new Date(e.startDate).getTime()-new Date(t.startDate).getTime();return 0!==a?a:new Date(e.endDate).getTime()-new Date(t.endDate).getTime()}),c=(0,s.useCallback)(async t=>{if(!e)return null;let r=tb(t,e),s=await eI.bI.create(r);if(s.success&&s.data){let e=tx(s.data);return a(t=>i([...t,e])),e}return o(s.error||"Failed to create task"),null},[e]),m=(0,s.useCallback)(async t=>{if(!e)return null;let r=Number(t.id);if(isNaN(r))return o("Invalid task ID"),null;let s=tb(t,e),n=await eI.bI.update(r,s);if(n.success&&n.data){let e=tx(n.data);return a(a=>i(a.map(a=>a.id===t.id?e:a))),e}return o(n.error||"Failed to update task"),null},[e]);return{tasks:t,loading:r,error:l,refetch:d,createTask:c,updateTask:m,deleteTask:(0,s.useCallback)(async e=>{let t=Number(e);if(isNaN(t))return o("Invalid task ID"),!1;let r=await eI.bI.delete(t);return r.success?(a(t=>t.filter(t=>t.id!==e)),!0):(o(r.error||"Failed to delete task"),!1)},[]),reorderTasks:(0,s.useCallback)(async t=>{if(!e)return;let r=i(t).map((e,t)=>({...e,order:t+1}));a(r);let s=r.map(e=>({id:Number(e.id),order:e.order})).filter(e=>!isNaN(e.id));await eI.bI.reorder(e,s)},[e])}}(t?Number(t.id):null),[f,x]=(0,s.useState)([]),[b,N]=(0,s.useState)([]),k=f.length>0,v=b.length>0,[w,y]=(0,s.useState)("week"),[Y,D]=(0,s.useState)("all"),[F,C]=(0,s.useState)(""),[S,A]=(0,s.useState)(!1),[T,R]=(0,s.useState)(!1),[M,_]=(0,s.useState)(!1),[P,z]=(0,s.useState)(null),[L,E]=(0,s.useState)(!1),[O,U]=(0,s.useState)(!1),[B,K]=(0,s.useState)(!1),[V,J]=(0,s.useState)(null),{theme:Z,setTheme:G,resolvedTheme:q}=(0,tN.D)(),H=(0,s.useRef)(null);(0,s.useEffect)(()=>{J(eW())},[]),(0,s.useEffect)(()=>{i&&eV.oR.error("Failed to load tasks: ".concat(i))},[i]);let W=(null==t?void 0:t.name)||(null==V?void 0:V.defaultProjectName)||"OCF Bond Issuance Project",Q=(null==t?void 0:t.description)||(null==V?void 0:V.defaultProjectDescription)||"Project Timeline & Task Management",X=(0,s.useMemo)(()=>{if(!F.trim())return o;let e=F.toLowerCase();return o.filter(t=>t.name.toLowerCase().includes(e))},[o,F]),ee=!e||(0,e0.DX)(e.role),et=!e||(0,e0.MF)(e.role),ea=!!e&&(0,e0.zb)(e.role),er=(0,s.useCallback)(()=>{x(e=>[...e.slice(-49),o]),N([])},[o]);(0,s.useEffect)(()=>{let e=e=>{!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&((e.ctrlKey||e.metaKey)&&"n"===e.key&&(e.preventDefault(),ee&&es()),(e.ctrlKey||e.metaKey)&&"d"===e.key&&(e.preventDefault(),A(e=>!e)),(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),R(e=>!e)),"1"===e.key&&y("day"),"2"===e.key&&y("week"),"3"===e.key&&y("month"),"Escape"===e.key&&M&&_(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[M,ee]);let es=()=>{z(null),_(!0)},en=async e=>{er(),P?await u(e)?eV.oR.success("Task updated"):eV.oR.error("Failed to update task"):await h(e)?eV.oR.success("Task added"):eV.oR.error("Failed to add task")},el=async e=>{er(),await p(e)?eV.oR.success("Task deleted"):eV.oR.error("Failed to delete task")},eo=async e=>{await g(e)},ed=async()=>{try{let e=(await a.e(316).then(a.t.bind(a,2699,23))).default,t=document.getElementById("gantt-chart-container");if(!t)return;let r=await e(t,{backgroundColor:"dark"===q?"#1c1917":"#fafaf9",scale:2}),s=document.createElement("a");s.download="".concat(W.replace(/\s+/g,"-").toLowerCase(),"-gantt.png"),s.href=r.toDataURL("image/png"),s.click(),eV.oR.success("Chart exported as PNG")}catch(e){eV.oR.error("Failed to export PNG")}},ei=async()=>{await c(),C(""),eV.oR.success("Tasks refreshed from server")},ec=l||d;return(0,r.FD)("div",{className:"min-h-screen bg-stone-100 dark:bg-stone-900 transition-colors duration-200",children:[(0,r.Y)(eV.l$,{position:"top-right",richColors:!0,theme:"dark"===q?"dark":"light"}),(0,r.FD)("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 px-4 md:px-6 py-4 bg-white dark:bg-stone-900 border-b border-stone-200 dark:border-stone-700",children:[(0,r.Y)("div",{className:"flex items-center gap-3",children:(0,r.Y)(ty,{settings:V,resolvedTheme:q,projectName:W,projectDescription:Q})}),(0,r.FD)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.Y)(tc,{}),ec&&(0,r.Y)(eU.A,{className:"w-4 h-4 animate-spin text-teal-600"}),ea&&(0,r.FD)(m,{variant:"outline",size:"sm",onClick:()=>K(!0),className:"border-stone-300 dark:border-stone-600 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700",title:"Manage Templates",children:[(0,r.Y)(tl.A,{className:"w-4 h-4 mr-1.5"}),(0,r.Y)("span",{className:"hidden sm:inline",children:"Templates"})]}),(0,r.FD)("div",{className:"flex items-center border-r border-stone-200 dark:border-stone-700 pr-2 mr-1",children:[(0,r.Y)(m,{variant:"ghost",size:"sm",onClick:()=>{f.length>0&&(f[f.length-1],N(e=>[...e,o]),x(e=>e.slice(0,-1)),eV.oR.info("Undo (local only - refresh to sync with server)"))},disabled:!k,className:"text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-200 disabled:opacity-30",title:"Undo (Ctrl+Z)",children:(0,r.Y)(tk.A,{className:"w-4 h-4"})}),(0,r.Y)(m,{variant:"ghost",size:"sm",onClick:()=>{b.length>0&&(b[b.length-1],x(e=>[...e,o]),N(e=>e.slice(0,-1)),eV.oR.info("Redo (local only - refresh to sync with server)"))},disabled:!v,className:"text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-200 disabled:opacity-30",title:"Redo (Ctrl+Shift+Z)",children:(0,r.Y)(tv.A,{className:"w-4 h-4"})})]}),(0,r.Y)(te,{onLoginClick:()=>U(!0)})]})]}),(0,r.Y)(j,{projectName:W,projectDescription:Q,onAddTask:ee?es:()=>eV.oR.error("You do not have permission to add tasks"),onExportPNG:ed,onExportJSON:()=>{let e=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),t=document.createElement("a");t.download="".concat(W.replace(/\s+/g,"-").toLowerCase(),"-tasks.json"),t.href=URL.createObjectURL(e),t.click(),eV.oR.success("Tasks exported as JSON")},onImportJSON:()=>{eV.oR.info("Import from JSON is disabled when using the database backend")},onRefresh:ei,theme:Z,resolvedTheme:q,onThemeChange:e=>{G(e)},onOpenSettings:()=>E(!0),settings:V||void 0}),(0,r.FD)("main",{className:"px-4 md:px-6 pb-8",children:[(0,r.Y)("div",{className:"mb-6",children:(0,r.Y)(I,{tasks:o})}),(0,r.FD)("div",{id:"gantt-chart-container",ref:H,className:"rounded-xl overflow-hidden shadow-lg",children:[(0,r.Y)($,{zoom:w,onZoomChange:y,filter:Y,onFilterChange:D,showDependencies:S,onShowDependenciesChange:A,showCriticalPath:T,onShowCriticalPathChange:R,searchQuery:F,onSearchChange:C}),(0,r.Y)("div",{className:"h-[calc(100vh-380px)] min-h-[500px]",children:ec?(0,r.Y)("div",{className:"h-full flex items-center justify-center bg-stone-50 dark:bg-stone-800",children:(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)(eU.A,{className:"w-8 h-8 animate-spin text-teal-600 mx-auto mb-2"}),(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400",children:"Loading tasks..."})]})}):(0,r.Y)(eu,{tasks:X,allTasks:o,zoom:w,filter:Y,showDependencies:S,showCriticalPath:T,onTaskClick:et?e=>{z(e),_(!0)}:void 0,onReorderTasks:eo,projectName:W})})]}),(0,r.FD)("footer",{className:"mt-6 text-center text-sm text-stone-500 dark:text-stone-400",children:[(0,r.Y)("p",{children:"Gantt Project Manager v76"}),(0,r.Y)("p",{className:"text-xs text-stone-400 dark:text-stone-500 mt-1",children:"Shortcuts: 1/2/3 = Zoom | Ctrl+N = New Task | Ctrl+D = Dependencies | Ctrl+K = Critical Path"})]})]}),(0,r.Y)(eJ,{open:M,onOpenChange:_,task:P,tasks:o,onSave:en,onDelete:el}),(0,r.Y)(e$,{open:L,onOpenChange:E,onSettingsChange:e=>{J(e),eV.oR.success("Settings saved")}}),(0,r.Y)(e3,{open:O,onOpenChange:U}),(0,r.Y)(tf,{open:B,onOpenChange:K})]})}function ty(e){let{settings:t,resolvedTheme:a,projectName:n,projectDescription:l}=e,[o,d]=(0,s.useState)(!1),i=t?"dark"===a?t.logoDark:t.logoLight:"/images/logo/ocf-logo.png",c=(null==t?void 0:t.logoFallbackText)||"OCF",m=(null==t?void 0:t.companyName)||"Oasis Capital Finance";return(0,s.useEffect)(()=>{d(!1)},[i]),(0,r.FD)(r.FK,{children:[!o&&i?(0,r.Y)("img",{src:i,alt:m,className:"h-8 md:h-10 w-auto ".concat("dark"===a&&i===(null==t?void 0:t.logoLight)?"brightness-0 invert":""),onError:()=>d(!0)}):(0,r.Y)("div",{className:"flex items-center gap-2",children:(0,r.Y)("div",{className:"w-10 h-10 rounded-lg bg-teal-600 dark:bg-teal-500 flex items-center justify-center shadow-sm",children:(0,r.Y)("span",{className:"text-white font-bold text-sm",children:c})})}),(0,r.FD)("div",{className:"hidden md:block border-l border-stone-300 dark:border-stone-600 pl-3",children:[(0,r.Y)("h1",{className:"text-lg md:text-xl font-bold text-stone-800 dark:text-white",children:n}),(0,r.Y)("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:l})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[372,973,924,441,684,358],()=>t(1795)),_N_E=e.O()}]);