(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{356:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Q});var r=a(2372),s=a(4399),l=a(2115),n=a(6874),i=a.n(n),d=a(4541),o=a(4581),c=a(6695),m=a(285),u=a(6126),h=a(5155);a(7650);var p=a(9708),x=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,p.TL)(`Primitive.${t}`),r=l.forwardRef((e,r)=>{let{asChild:s,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,h.jsx)(s?a:t,{...l,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),f="Progress",[g,b]=function(e,t=[]){let a=[],r=()=>{let t=a.map(e=>l.createContext(e));return function(a){let r=a?.[e]||t;return l.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return r.scopeName=e,[function(t,r){let s=l.createContext(r);s.displayName=t+"Context";let n=a.length;a=[...a,r];let i=t=>{let{scope:a,children:r,...i}=t,d=a?.[e]?.[n]||s,o=l.useMemo(()=>i,Object.values(i));return(0,h.jsx)(d.Provider,{value:o,children:r})};return i.displayName=t+"Provider",[i,function(a,i){let d=i?.[e]?.[n]||s,o=l.useContext(d);if(o)return o;if(void 0!==r)return r;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:a,scopeName:r})=>{let s=a(e)[`__scope${r}`];return{...t,...s}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}(r,...t)]}(f),[N,v]=g(f),k=l.forwardRef((e,t)=>{var a,r,s,l;let{__scopeProgress:n,value:i=null,max:d,getValueLabel:o=y,...c}=e;(d||0===d)&&!A(d)&&console.error((a="".concat(d),r="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let m=A(d)?d:100;null===i||T(i,m)||console.error((s="".concat(i),l="Progress","Invalid prop `value` of value `".concat(s,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let u=T(i,m)?i:null,p=F(u)?o(u,m):void 0;return(0,h.jsx)(N,{scope:n,value:u,max:m,children:(0,h.jsx)(x.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":F(u)?u:void 0,"aria-valuetext":p,role:"progressbar","data-state":Y(u,m),"data-value":null!=u?u:void 0,"data-max":m,...c,ref:t})})});k.displayName=f;var w="ProgressIndicator",D=l.forwardRef((e,t)=>{var a;let{__scopeProgress:r,...s}=e,l=v(w,r);return(0,h.jsx)(x.div,{"data-state":Y(l.value,l.max),"data-value":null!=(a=l.value)?a:void 0,"data-max":l.max,...s,ref:t})});function y(e,t){return"".concat(Math.round(e/t*100),"%")}function Y(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function F(e){return"number"==typeof e}function A(e){return F(e)&&!isNaN(e)&&e>0}function T(e,t){return F(e)&&!isNaN(e)&&e<=t&&e>=0}D.displayName=w;var _=a(9434);let j=l.forwardRef((e,t)=>{let{className:a,value:s,...l}=e;return(0,r.Y)(k,{ref:t,className:(0,_.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...l,children:(0,r.Y)(D,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});j.displayName=k.displayName;var I=a(9827),S=a(5300),C=a(286),M=a(2023),P=a(157);let Z=(0,P.A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),E=(0,P.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var O=a(8127),W=a(7648),$=a(462);let R=(0,P.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var L=a(1133);let z=(0,P.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),B=(0,P.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var G=a(7990),V=a(5727);let H=[{title:"Project Timeline",description:"View and manage your Gantt chart",icon:I.A,href:"/timeline",color:"from-teal-500 to-teal-600"},{title:"Document Library",description:"Access deal documents and files",icon:S.A,href:"/documents",color:"from-blue-500 to-blue-600"},{title:"Deal Team",description:"Contact team members",icon:C.A,href:"/team",color:"from-purple-500 to-purple-600"},{title:"Diary",description:"Schedule and manage events",icon:M.A,href:"/diary",color:"from-amber-500 to-amber-600"}];function U(){let{user:e,currentProject:t,projects:a}=(0,d.A)(),s=t?Number(t.id):null,{tasks:n,loading:h}=(0,o.i)(s),[p,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/version.php"),t=await e.json();t.success&&x(t.data)}catch(e){console.error("Error fetching version:",e)}})()},[]);let f=n.length,g=n.filter(e=>"complete"===e.status).length,b=n.filter(e=>"in-progress"===e.status).length;n.filter(e=>"not-started"===e.status).length;let N=n.filter(e=>new Date(e.endDate)<new Date&&"complete"!==e.status).length,v=n.filter(e=>e.isMilestone).length,k=n.filter(e=>e.isMilestone&&"complete"===e.status).length,w=f>0?Math.round(g/f*100):0,D=n.filter(e=>e.isMilestone&&"complete"!==e.status).sort((e,t)=>new Date(e.endDate).getTime()-new Date(t.endDate).getTime()).slice(0,3),y=n.filter(e=>"in-progress"===e.status).sort((e,t)=>new Date(e.endDate).getTime()-new Date(t.endDate).getTime()).slice(0,5);return(0,r.FD)("div",{className:"space-y-8",children:[(0,r.FD)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,r.FD)("div",{children:[(0,r.FD)("h1",{className:"text-2xl md:text-3xl font-bold text-stone-800 dark:text-white",children:[(()=>{let e=new Date().getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})(),", ",(null==e?void 0:e.name.split(" ")[0])||"Guest"]}),(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400 mt-1",children:"Welcome to your client portal. Here's an overview of your projects."})]}),t&&(0,r.FD)("div",{className:"flex items-center gap-3 px-4 py-2 bg-teal-50 dark:bg-teal-900/20 rounded-lg border border-teal-200 dark:border-teal-800",children:[(0,r.Y)(Z,{className:"h-5 w-5 text-teal-600 dark:text-teal-400"}),(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-xs text-teal-600 dark:text-teal-400 font-medium",children:"Current Project"}),(0,r.Y)("p",{className:"text-sm font-semibold text-stone-800 dark:text-white",children:t.name})]})]})]}),(0,r.FD)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.FD)(c.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-teal-500 to-teal-600"}),(0,r.Y)(c.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"Total Tasks"}),(0,r.Y)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:f})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-teal-100 dark:bg-teal-900/30",children:(0,r.Y)(E,{className:"h-6 w-6 text-teal-600 dark:text-teal-400"})})]})})]}),(0,r.FD)(c.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-green-600"}),(0,r.Y)(c.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"Completed"}),(0,r.Y)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:g})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-green-100 dark:bg-green-900/30",children:(0,r.Y)(O.A,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})})]}),(0,r.FD)(c.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 to-amber-600"}),(0,r.Y)(c.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"In Progress"}),(0,r.Y)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:b})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-amber-100 dark:bg-amber-900/30",children:(0,r.Y)(W.A,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})})]})})]}),(0,r.FD)(c.Zp,{className:"relative bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 overflow-hidden",children:[(0,r.Y)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-purple-600"}),(0,r.Y)(c.Wu,{className:"pt-6",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("div",{children:[(0,r.Y)("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:"Milestones"}),(0,r.FD)("p",{className:"text-3xl font-bold text-stone-800 dark:text-white mt-1",children:[k,"/",v]})]}),(0,r.Y)("div",{className:"p-3 rounded-xl bg-purple-100 dark:bg-purple-900/30",children:(0,r.Y)($.A,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})]})})]})]}),(0,r.FD)(c.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700",children:[(0,r.FD)(c.aR,{children:[(0,r.FD)(c.ZB,{className:"flex items-center gap-2 text-stone-800 dark:text-white",children:[(0,r.Y)(R,{className:"h-5 w-5 text-teal-600"}),"Project Progress"]}),(0,r.Y)(c.BT,{className:"text-stone-500 dark:text-stone-400",children:"Overall completion status of current project"})]}),(0,r.Y)(c.Wu,{children:(0,r.FD)("div",{className:"space-y-4",children:[(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)("span",{className:"text-sm font-medium text-stone-600 dark:text-stone-300",children:[g," of ",f," tasks completed"]}),(0,r.FD)("span",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:[w,"%"]})]}),(0,r.Y)(j,{value:w,className:"h-3"}),N>0&&(0,r.FD)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[(0,r.Y)(L.A,{className:"h-4 w-4"}),(0,r.FD)("span",{className:"text-sm",children:[N," task",N>1?"s":""," overdue"]})]})]})})]}),(0,r.FD)("div",{children:[(0,r.Y)("h2",{className:"text-lg font-semibold text-stone-800 dark:text-white mb-4",children:"Quick Actions"}),(0,r.Y)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:H.map(e=>{let t=e.icon;return(0,r.Y)(i(),{href:e.href,children:(0,r.Y)(c.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 hover:shadow-lg transition-all duration-200 cursor-pointer group h-full",children:(0,r.FD)(c.Wu,{className:"pt-6",children:[(0,r.Y)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"),children:(0,r.Y)(t,{className:"h-6 w-6 text-white"})}),(0,r.Y)("h3",{className:"font-semibold text-stone-800 dark:text-white mb-1 group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors",children:e.title}),(0,r.Y)("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:e.description}),(0,r.Y)(z,{className:"h-4 w-4 text-teal-600 dark:text-teal-400 mt-3 group-hover:translate-x-1 transition-transform"})]})})},e.href)})})]}),(0,r.FD)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.FD)(c.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700",children:[(0,r.Y)(c.aR,{children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)(c.ZB,{className:"flex items-center gap-2 text-stone-800 dark:text-white",children:[(0,r.Y)($.A,{className:"h-5 w-5 text-amber-500"}),"Upcoming Milestones"]}),(0,r.Y)(i(),{href:"/timeline",children:(0,r.FD)(m.$,{variant:"ghost",size:"sm",className:"text-teal-600 dark:text-teal-400",children:["View All ",(0,r.Y)(z,{className:"h-4 w-4 ml-1"})]})})]})}),(0,r.Y)(c.Wu,{children:0===D.length?(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400 text-center py-8",children:"No upcoming milestones"}):(0,r.Y)("div",{className:"space-y-4",children:D.map(e=>(0,r.FD)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-stone-50 dark:bg-stone-700/50",children:[(0,r.Y)("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:(0,r.Y)($.A,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.Y)("p",{className:"font-medium text-stone-800 dark:text-white truncate",children:e.name}),(0,r.FD)("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["Due: ",new Date(e.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),(0,r.FD)(u.E,{variant:"in-progress"===e.status?"default":"secondary",className:"in-progress"===e.status?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"",children:[e.progress,"%"]})]},e.id))})})]}),(0,r.FD)(c.Zp,{className:"bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700",children:[(0,r.Y)(c.aR,{children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.FD)(c.ZB,{className:"flex items-center gap-2 text-stone-800 dark:text-white",children:[(0,r.Y)(W.A,{className:"h-5 w-5 text-teal-600"}),"In Progress Tasks"]}),(0,r.Y)(i(),{href:"/timeline",children:(0,r.FD)(m.$,{variant:"ghost",size:"sm",className:"text-teal-600 dark:text-teal-400",children:["View All ",(0,r.Y)(z,{className:"h-4 w-4 ml-1"})]})})]})}),(0,r.Y)(c.Wu,{children:0===y.length?(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400 text-center py-8",children:"No tasks in progress"}):(0,r.Y)("div",{className:"space-y-3",children:y.map(e=>(0,r.Y)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-stone-50 dark:bg-stone-700/50",children:(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.Y)("p",{className:"font-medium text-stone-800 dark:text-white truncate",children:e.name}),(0,r.FD)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.Y)(j,{value:e.progress,className:"h-1.5 flex-1"}),(0,r.FD)("span",{className:"text-xs text-stone-500 dark:text-stone-400 w-10",children:[e.progress,"%"]})]})]})},e.id))})})]})]}),p&&(0,r.Y)(c.Zp,{className:"bg-stone-50 dark:bg-stone-800/50 border-stone-200 dark:border-stone-700",children:(0,r.Y)(c.Wu,{className:"py-4",children:(0,r.FD)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,r.FD)("div",{className:"flex items-center gap-3",children:[(0,r.Y)("div",{className:"p-2 rounded-lg bg-teal-100 dark:bg-teal-900/30",children:(0,r.Y)(B,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"})}),(0,r.FD)("div",{children:[(0,r.FD)("p",{className:"text-sm font-semibold text-stone-800 dark:text-white",children:["Client Portal ",p.current_version]}),(0,r.Y)("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Oasis Capital Finance"})]})]}),(0,r.FD)("div",{className:"flex flex-wrap items-center gap-4 text-xs",children:[(0,r.FD)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white dark:bg-stone-700 border border-stone-200 dark:border-stone-600",children:[(0,r.Y)(G.A,{className:"h-3.5 w-3.5 text-blue-500"}),(0,r.FD)("span",{className:"text-stone-600 dark:text-stone-300",children:["File: ",(0,r.Y)("span",{className:"font-medium",children:p.file.version})]})]}),(0,r.FD)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white dark:bg-stone-700 border border-stone-200 dark:border-stone-600",children:[(0,r.Y)(V.A,{className:"h-3.5 w-3.5 text-green-500"}),(0,r.FD)("span",{className:"text-stone-600 dark:text-stone-300",children:["Database: ",(0,r.Y)("span",{className:"font-medium",children:p.database.version||"N/A"})]})]}),p.versions_match?(0,r.FD)(u.E,{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-0",children:[(0,r.Y)(O.A,{className:"h-3 w-3 mr-1"}),"Synced"]}):(0,r.FD)(u.E,{className:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 border-0",children:[(0,r.Y)(L.A,{className:"h-3 w-3 mr-1"}),"Version Mismatch"]})]})]})})})]})}var q=a(6671),K=a(7280);function Q(){let{resolvedTheme:e}=(0,K.D)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(q.l$,{position:"top-right",richColors:!0,theme:"dark"===e?"dark":"light"}),(0,r.Y)(s.t,{children:(0,r.Y)(U,{})})]})}},462:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},1795:(e,t,a)=>{Promise.resolve().then(a.bind(a,356))},4581:(e,t,a)=>{"use strict";a.d(t,{i:()=>i});var r=a(2115),s=a(5731);function l(e){var t;return{id:String(e.id),name:e.name,startDate:new Date(e.start_date),endDate:new Date(e.end_date),progress:e.progress,status:e.status,isMilestone:e.is_milestone,order:e.task_order,dependencies:null==(t=e.dependencies)?void 0:t.map(String),parentId:e.parent_id?String(e.parent_id):void 0,notes:e.notes||void 0,color:e.color||void 0}}function n(e,t){var a;return{project_id:t,name:e.name,description:"",notes:e.notes||"",start_date:e.startDate instanceof Date?e.startDate.toISOString().split("T")[0]:new Date(e.startDate).toISOString().split("T")[0],end_date:e.endDate instanceof Date?e.endDate.toISOString().split("T")[0]:new Date(e.endDate).toISOString().split("T")[0],progress:e.progress,status:e.status,is_milestone:e.isMilestone||!1,task_order:e.order,dependencies:null==(a=e.dependencies)?void 0:a.map(Number).filter(e=>!isNaN(e)),parent_id:e.parentId?Number(e.parentId):null,color:e.color||null}}function i(e){let[t,a]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),m=(0,r.useCallback)(async()=>{if(!e){a([]),d(!1);return}d(!0),c(null);let t=await s.bI.getByProject(e);if(t.success&&t.data){let e=t.data.map(l);e.sort((e,t)=>{let a=new Date(e.startDate).getTime()-new Date(t.startDate).getTime();return 0!==a?a:new Date(e.endDate).getTime()-new Date(t.endDate).getTime()}),a(e)}else c(t.error||"Failed to fetch tasks"),a([]);d(!1)},[e]);(0,r.useEffect)(()=>{m()},[m]);let u=e=>[...e].sort((e,t)=>{let a=new Date(e.startDate).getTime()-new Date(t.startDate).getTime();return 0!==a?a:new Date(e.endDate).getTime()-new Date(t.endDate).getTime()}),h=(0,r.useCallback)(async t=>{if(!e)return null;let r=n(t,e),i=await s.bI.create(r);if(i.success&&i.data){let e=l(i.data);return a(t=>u([...t,e])),e}return c(i.error||"Failed to create task"),null},[e]),p=(0,r.useCallback)(async t=>{if(!e)return null;let r=Number(t.id);if(isNaN(r))return c("Invalid task ID"),null;let i=n(t,e),d=await s.bI.update(r,i);if(d.success&&d.data){let e=l(d.data);return a(a=>u(a.map(a=>a.id===t.id?e:a))),e}return c(d.error||"Failed to update task"),null},[e]);return{tasks:t,loading:i,error:o,refetch:m,createTask:h,updateTask:p,deleteTask:(0,r.useCallback)(async e=>{let t=Number(e);if(isNaN(t))return c("Invalid task ID"),!1;let r=await s.bI.delete(t);return r.success?(a(t=>t.filter(t=>t.id!==e)),!0):(c(r.error||"Failed to delete task"),!1)},[]),reorderTasks:(0,r.useCallback)(async t=>{if(!e)return;let r=u(t).map((e,t)=>({...e,order:t+1}));a(r);let l=r.map(e=>({id:Number(e.id),order:e.order})).filter(e=>!isNaN(e.id));await s.bI.reorder(e,l)},[e])}}},7648:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[372,9,671,924,190,441,684,358],()=>t(1795)),_N_E=e.O()}]);