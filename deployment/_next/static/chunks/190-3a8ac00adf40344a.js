"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{285:(e,t,a)=>{a.d(t,{$:()=>d});var r=a(2372),n=a(2115),s=a(9708),l=a(2085),i=a(9434);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,size:l,asChild:d=!1,...c}=e,m=d?s.DX:"button";return(0,r.Y)(m,{className:(0,i.cn)(o({variant:n,size:l,className:a})),ref:t,...c})});d.displayName="Button"},4165:(e,t,a)=>{a.d(t,{Cf:()=>f,Es:()=>u,L3:()=>p,c7:()=>h,lG:()=>o,rr:()=>x,zM:()=>d});var r=a(2372),n=a(2115),s=a(5821),l=a(5318),i=a(9434);let o=s.bL,d=s.l9,c=s.ZL;s.bm;let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)(s.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});m.displayName=s.hJ.displayName;let f=n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.FD)(c,{children:[(0,r.Y)(m,{}),(0,r.FD)(s.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[n,(0,r.FD)(s.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.Y)(l.A,{className:"h-4 w-4"}),(0,r.Y)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=s.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,r.Y)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let u=e=>{let{className:t,...a}=e;return(0,r.Y)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="DialogFooter";let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)(s.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});p.displayName=s.hE.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)(s.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});x.displayName=s.VY.displayName},4399:(e,t,a)=>{a.d(t,{t:()=>V});var r=a(2372),n=a(2115),s=a(6874),l=a.n(s),i=a(5695),o=a(9434),d=a(4541),c=a(7280),m=a(285),f=a(469),h=a(9827),u=a(5300),p=a(286),x=a(2023),g=a(1794),b=a(3896),N=a(5844),v=a(5318),y=a(8341),Y=a(6936),w=a(8027),k=a(3349),F=a(3158),D=a(965);let C=[{href:"/",label:"Dashboard",icon:f.A},{href:"/timeline/",label:"Project Timeline",icon:h.A},{href:"/documents/",label:"Document Library",icon:u.A},{href:"/team/",label:"Deal Team",icon:p.A},{href:"/diary/",label:"Diary",icon:x.A}],A=[{href:"/admin/projects/",label:"Manage Projects",icon:g.A,adminOnly:!0},{href:"/admin/allocate/",label:"Allocate to Client",icon:b.A,adminOnly:!0},{href:"/admin/team/",label:"Team Members",icon:p.A,managerOnly:!0},{href:"/admin/templates/",label:"Templates",icon:N.A,managerOnly:!0}];function j(e){let{className:t}=e,a=(0,i.usePathname)(),{user:s,logout:f,currentProject:h}=(0,d.A)(),{theme:u,setTheme:p,resolvedTheme:x}=(0,c.D)(),[g,b]=(0,n.useState)(!1),[N,j]=(0,n.useState)(!1),O=(null==s?void 0:s.role)==="admin",z=(null==s?void 0:s.role)==="manager",S=O||z,R=A.filter(e=>(!e.adminOnly||!!O)&&(!e.managerOnly||!!S));return(0,r.FD)(r.FK,{children:[(0,r.Y)("div",{className:"fixed top-0 left-0 right-0 z-50 lg:hidden bg-white dark:bg-stone-900 border-b border-stone-200 dark:border-stone-700 px-4 py-3",children:(0,r.FD)("div",{className:"flex items-center justify-between",children:[(0,r.Y)("img",{src:"/images/logo/OCFLogoSTrans.png",alt:"Oasis Capital Finance",className:"h-8 w-auto object-contain ".concat("dark"===x?"":"invert")}),(0,r.Y)(m.$,{variant:"ghost",size:"icon",className:"text-stone-700 dark:text-stone-300",onClick:()=>j(!N),children:N?(0,r.Y)(v.A,{className:"h-5 w-5"}):(0,r.Y)(y.A,{className:"h-5 w-5"})})]})}),N&&(0,r.Y)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>j(!1)}),(0,r.FD)("aside",{className:(0,o.cn)("fixed left-0 top-0 z-40 h-screen bg-stone-900 dark:bg-stone-950 text-white transition-all duration-300 flex flex-col",g?"w-20":"w-64",N?"translate-x-0":"-translate-x-full lg:translate-x-0",t),children:[(0,r.Y)("div",{className:"flex items-center gap-3 p-4 border-b border-stone-700/50",children:g?(0,r.Y)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center flex-shrink-0 shadow-lg",children:(0,r.Y)("span",{className:"text-white font-bold text-sm",children:"OCF"})}):(0,r.Y)("img",{src:"/images/logo/OCFLogoSTrans.png",alt:"Oasis Capital Finance",className:"h-8 w-auto object-contain"})}),h&&!g&&(0,r.FD)("div",{className:"px-4 py-3 border-b border-stone-700/50",children:[(0,r.Y)("p",{className:"text-xs text-stone-500 uppercase tracking-wide mb-1",children:"Current Project"}),(0,r.Y)("p",{className:"text-sm font-medium text-teal-400 truncate",children:h.name})]}),(0,r.FD)("nav",{className:"flex-1 py-4 overflow-y-auto",children:[(0,r.Y)("ul",{className:"space-y-1 px-3",children:C.map(e=>{let t=a===e.href,n=e.icon;return(0,r.Y)("li",{children:(0,r.FD)(l(),{href:e.href,onClick:()=>j(!1),className:(0,o.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group",t?"bg-teal-600/20 text-teal-400 border border-teal-500/30":"text-stone-400 hover:bg-stone-800 hover:text-white"),children:[(0,r.Y)(n,{className:(0,o.cn)("h-5 w-5 flex-shrink-0 transition-colors",t?"text-teal-400":"text-stone-500 group-hover:text-stone-300")}),!g&&(0,r.FD)(r.FK,{children:[(0,r.Y)("span",{className:"flex-1 truncate",children:e.label}),e.badge&&(0,r.Y)("span",{className:"bg-teal-600 text-white text-xs px-2 py-0.5 rounded-full",children:e.badge})]})]})},e.href)})}),S&&R.length>0&&(0,r.FD)(r.FK,{children:[!g&&(0,r.Y)("div",{className:"px-6 pt-6 pb-2",children:(0,r.Y)("p",{className:"text-xs text-stone-500 uppercase tracking-wide font-semibold",children:"Administration"})}),g&&(0,r.Y)("div",{className:"border-t border-stone-700/50 my-3 mx-3"}),(0,r.Y)("ul",{className:"space-y-1 px-3",children:R.map(e=>{let t=a===e.href,n=e.icon;return(0,r.Y)("li",{children:(0,r.FD)(l(),{href:e.href,onClick:()=>j(!1),className:(0,o.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group",t?"bg-amber-600/20 text-amber-400 border border-amber-500/30":"text-stone-400 hover:bg-stone-800 hover:text-white"),children:[(0,r.Y)(n,{className:(0,o.cn)("h-5 w-5 flex-shrink-0 transition-colors",t?"text-amber-400":"text-stone-500 group-hover:text-stone-300")}),!g&&(0,r.Y)("span",{className:"flex-1 truncate",children:e.label})]})},e.href)})})]})]}),(0,r.FD)("div",{className:"border-t border-stone-700/50 p-3 space-y-2",children:[(0,r.FD)("button",{onClick:()=>{p("dark"===x?"light":"dark")},className:(0,o.cn)("flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-stone-400 hover:bg-stone-800 hover:text-white transition-all",g&&"justify-center"),children:["dark"===x?(0,r.Y)(Y.A,{className:"h-5 w-5 flex-shrink-0"}):(0,r.Y)(w.A,{className:"h-5 w-5 flex-shrink-0"}),!g&&(0,r.Y)("span",{children:"dark"===x?"Light Mode":"Dark Mode"})]}),s&&(0,r.FD)("div",{className:(0,o.cn)("flex items-center gap-3 px-3 py-2",g?"justify-center":""),children:[(0,r.Y)("div",{className:(0,o.cn)("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",O?"bg-gradient-to-br from-red-500 to-red-600":z?"bg-gradient-to-br from-teal-500 to-teal-600":"bg-gradient-to-br from-stone-600 to-stone-700"),children:(0,r.Y)("span",{className:"text-white text-xs font-medium",children:s.name.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()})}),!g&&(0,r.FD)("div",{className:"flex-1 overflow-hidden",children:[(0,r.Y)("p",{className:"text-sm font-medium text-white truncate",children:s.name}),(0,r.Y)("p",{className:(0,o.cn)("text-xs capitalize",O?"text-red-400":z?"text-teal-400":"text-stone-500"),children:s.role})]})]}),s&&(0,r.FD)("button",{onClick:f,className:(0,o.cn)("flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-red-400 hover:bg-red-500/10 transition-all",g&&"justify-center"),children:[(0,r.Y)(k.A,{className:"h-5 w-5 flex-shrink-0"}),!g&&(0,r.Y)("span",{children:"Sign Out"})]}),(0,r.Y)("button",{onClick:()=>b(!g),className:"hidden lg:flex items-center justify-center w-full py-2 text-stone-500 hover:text-stone-300 transition-colors",children:g?(0,r.Y)(F.A,{className:"h-5 w-5"}):(0,r.Y)(D.A,{className:"h-5 w-5"})})]})]})]})}var O=a(4165),z=a(4260),S=a(8112),R=a(7082),E=a(3173),L=a(7990),T=a(5727),_=a(8127),P=a(1133);let M={admin:S.A,manager:R.A,client:E.A},Z={admin:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800",manager:"bg-teal-100 dark:bg-teal-900/30 text-teal-700 dark:text-teal-400 border-teal-200 dark:border-teal-800",client:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-800"};function H(e){let{open:t,onOpenChange:a}=e,{login:s}=(0,d.A)(),{resolvedTheme:l}=(0,c.D)(),[i,o]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&(async()=>{try{let e=await fetch("/api/version.php"),t=await e.json();t.success&&o(t.data)}catch(e){console.error("Error fetching version:",e)}})()},[t]);let m=e=>{s(e),a(!1)},f=z.HZ.filter(e=>"admin"===e.role),h=z.HZ.filter(e=>"manager"===e.role),u=z.HZ.filter(e=>"client"===e.role);return(0,r.Y)(O.lG,{open:t,onOpenChange:a,children:(0,r.FD)(O.Cf,{className:"sm:max-w-[500px] bg-white dark:bg-stone-900 border-stone-200 dark:border-stone-700",children:[(0,r.Y)(O.c7,{children:(0,r.FD)("div",{className:"flex flex-col items-center gap-3 mb-4",children:[(0,r.Y)("img",{src:"/images/logo/OCFLogoSTrans.png",alt:"Oasis Capital Finance",className:"h-12 w-auto object-contain ".concat("dark"===l?"":"invert")}),(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)(O.L3,{className:"text-stone-800 dark:text-white",children:"Client Portal"}),(0,r.Y)(O.rr,{className:"text-stone-500 dark:text-stone-400",children:"Select a user to continue"})]})]})}),(0,r.FD)("div",{className:"space-y-4 py-4",children:[(0,r.FD)("div",{children:[(0,r.FD)("h3",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-2 flex items-center gap-1.5",children:[(0,r.Y)(S.A,{className:"w-3.5 h-3.5"}),"Administrators"]}),(0,r.Y)("div",{className:"space-y-2",children:f.map(e=>(0,r.Y)(B,{user:e,onSelect:m},e.id))})]}),(0,r.FD)("div",{children:[(0,r.FD)("h3",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-2 flex items-center gap-1.5",children:[(0,r.Y)(R.A,{className:"w-3.5 h-3.5"}),"Managers"]}),(0,r.Y)("div",{className:"space-y-2",children:h.map(e=>(0,r.Y)(B,{user:e,onSelect:m},e.id))})]}),(0,r.FD)("div",{children:[(0,r.FD)("h3",{className:"text-xs font-semibold text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-2 flex items-center gap-1.5",children:[(0,r.Y)(E.A,{className:"w-3.5 h-3.5"}),"Clients"]}),(0,r.Y)("div",{className:"space-y-2",children:u.map(e=>(0,r.Y)(B,{user:e,onSelect:m},e.id))})]})]}),i&&(0,r.Y)("div",{className:"pt-4 mt-2 border-t border-stone-200 dark:border-stone-700",children:(0,r.FD)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 text-xs text-stone-500 dark:text-stone-400",children:[(0,r.FD)("span",{className:"font-medium",children:["Portal ",i.current_version]}),(0,r.FD)("div",{className:"flex items-center gap-3",children:[(0,r.FD)("span",{className:"flex items-center gap-1",children:[(0,r.Y)(L.A,{className:"h-3 w-3 text-blue-500"}),"File: ",i.file.version]}),(0,r.FD)("span",{className:"flex items-center gap-1",children:[(0,r.Y)(T.A,{className:"h-3 w-3 text-green-500"}),"DB: ",i.database.version||"N/A"]}),i.versions_match?(0,r.Y)(_.A,{className:"h-3.5 w-3.5 text-green-500"}):(0,r.Y)(P.A,{className:"h-3.5 w-3.5 text-amber-500"})]})]})})]})})}function B(e){let{user:t,onSelect:a}=e,n=M[t.role];return(0,r.FD)("button",{type:"button",onClick:()=>a(t.id),className:"w-full p-3 rounded-lg border ".concat(Z[t.role]," hover:opacity-80 transition-all text-left flex items-center gap-3"),children:[(0,r.Y)("div",{className:"w-10 h-10 rounded-full bg-white dark:bg-stone-800 flex items-center justify-center shadow-sm",children:(0,r.Y)(n,{className:"w-5 h-5"})}),(0,r.FD)("div",{className:"flex-1 min-w-0",children:[(0,r.Y)("p",{className:"font-medium truncate",children:t.name}),(0,r.Y)("p",{className:"text-xs opacity-70 truncate",children:t.email})]}),(0,r.Y)("span",{className:"text-xs font-medium uppercase opacity-60",children:t.role})]})}function V(e){let{children:t}=e,{user:a,isAuthenticated:s,loading:l}=(0,d.A)(),[i,c]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{f(!0)},[]),(0,n.useEffect)(()=>{!m||l||s||c(!0)},[m,l,s]),m)?(0,r.FD)("div",{className:"min-h-screen bg-stone-100 dark:bg-stone-900",children:[(0,r.Y)(j,{}),(0,r.Y)("main",{className:(0,o.cn)("min-h-screen transition-all duration-300","lg:ml-64","pt-14 lg:pt-0"),children:(0,r.Y)("div",{className:"p-4 md:p-6 lg:p-8",children:l?(0,r.Y)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)("div",{className:"w-12 h-12 rounded-xl bg-teal-600 animate-pulse mx-auto mb-4"}),(0,r.Y)("p",{className:"text-stone-500 dark:text-stone-400",children:"Loading..."})]})}):t})}),(0,r.Y)(H,{open:i&&!s,onOpenChange:c})]}):(0,r.Y)("div",{className:"min-h-screen bg-stone-100 dark:bg-stone-900 flex items-center justify-center",children:(0,r.Y)("div",{className:"animate-pulse",children:(0,r.Y)("div",{className:"w-12 h-12 rounded-xl bg-teal-600/30"})})})}},6126:(e,t,a)=>{a.d(t,{E:()=>i});var r=a(2372);a(2115);var n=a(2085),s=a(9434);let l=(0,n.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...n}=e;return(0,r.Y)("div",{className:(0,s.cn)(l({variant:a}),t),...n})}},6695:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i});var r=a(2372),n=a(2115),s=a(9434);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)("div",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",a),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.Y)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},9434:(e,t,a)=>{a.d(t,{cn:()=>s});var r=a(2596),n=a(9688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}}}]);